{"version":3,"sources":["webpack:///./src/components/toolbar/colorpalette.css?c668","webpack:///./src/pages/settings.css?562f","webpack:///./src/components/paragraphs/verse.css?6815","webpack:///./src/components/toolbar/toolbar.css?4e74","webpack:///./src/components/nav/nav.css?9fd9","webpack:///./src/components/paragraphs/paragraph.css?795e","webpack:///./src/app.css?1eda","webpack:///./src/components/reader/reader.css?3da7","webpack:///./src/components/paragraphs/versenote.css?3b9b","webpack:///./src/components/nav/nav.tsx","webpack:///./src/utils/books.ts","webpack:///./src/utils/classnames.ts","webpack:///./src/utils/useLocalStorage.ts","webpack:///./src/utils/cssVars.ts","webpack:///./src/utils/visitParagraph.ts","webpack:///./src/utils/eventEmitter.ts","webpack:///./src/utils/index.ts","webpack:///./src/components/paragraphs/select.ts","webpack:///./src/components/paragraphs/versenotecontext.tsx","webpack:///./src/icons/md-edit.svg","webpack:///./src/components/paragraphs/versenote.tsx","webpack:///./src/components/paragraphs/verse.tsx","webpack:///./src/components/paragraphs/paragraph.tsx","webpack:///./src/components/paragraphs/paragraphs.tsx","webpack:///./src/components/reader/reader.tsx","webpack:///./src/components/readergroup/readergroup.tsx","webpack:///./src/icons/md-add-comment.svg","webpack:///./src/icons/md-format-bold.svg","webpack:///./src/icons/md-format-italic.svg","webpack:///./src/icons/md-format-underlined.svg","webpack:///./src/icons/md-undo.svg","webpack:///./src/icons/md-redo.svg","webpack:///./src/icons/md-format-text-color.svg","webpack:///./src/icons/md-format-highlight.svg","webpack:///./src/icons/index.ts","webpack:///./src/components/toolbar/colorpalette.tsx","webpack:///./src/components/toolbar/toolbar.tsx","webpack:///./src/components/index.ts","webpack:///./src/pages/home.tsx","webpack:///./src/pages/about.tsx","webpack:///./src/pages/settings.tsx","webpack:///./src/pages/index.ts","webpack:///./src/app.tsx","webpack:///./src/app.css?9ff3","webpack:///./src/components/readergroup/readergroup.css?03ea"],"names":["NavLink","props","Nav","styles","header","navbarGrow","navbar","navbarBrand","display","bugs","url","form","getChapterPath","version","book","chapter","padStart","cache","getChapter","path","Promise","resolve","reject","fetch","then","res","json","paragraphs","catch","books","name","chapters","texts","classnames","args","Array","prototype","slice","call","filter","Boolean","join","useLocalStorage","key","initialValue","useState","item","window","localStorage","getItem","JSON","parse","storedValue","setStoredValue","setValue","value","setItem","stringify","cssVars","visit","verse","visitor","parent","isArray","v","forEach","visitParagraphs","p","events","subscribe","event","listener","push","unsubscribe","i","length","splice","emit","listeners","selectedNodes","copyableTags","copyStyles","BODY","P","SPAN","snapToWords","range","setStart","startContainer","endContainer","setEnd","iterateOverRange","rangeFn","it","document","createNodeIterator","commonAncestorContainer","hitFirstNode","node","nextNode","getStyles","nodeStyles","getComputedStyle","nodeName","style","map","replace","getRange","selection","getSelection","rangeCount","undefined","getRangeAt","startOffset","endOffset","onSelectChange","parentNode","onDoubleClickVerseNumber","ev","console","log","preventDefault","onCopy","config","selectVerseNums","toCopy","toCopyHTML","body","addedFirstPara","includes","textContent","tag","toLowerCase","clipboardData","setData","NoteContext","createContext","onNoteSubmit","_note","onNoteRemove","VerseNote","textAreaRef","useRef","note","isFormOpen","setFormOpen","isNoteOpen","setNoteOpen","useEffect","current","focus","onSubmit","onInput","target","onOpenForm","_ev","isOpen","toggleNoteOpen","marginClass","getParagraphClass","paragraphStyles","q","inMargin","sup","textareaContainer","textarea","lastVerse","startPunct","endPunct","suffixes","isNoted","noted","Verse","highlight","background","prependSpace","t","n","test","id","paragraph","qcol","Paragraph","className","Paragraphs","clearSelection","removeAllRanges","Reader","GEN","text","Object","keys","setParagraphs","highlights","setHighlights","notes","setNotes","defaultSettings","divRef","color","toId","savedNote","fromId","onAddNote","onAddHighlight","onNavChange","scrollTop","onBookChange","onChapterChange","onTextChange","getSelectedNodes","ids","contains","getAttribute","selected","assign","article","navContainer","entries","val","apply","_el","onAddReader","windowButton","onCloseReader","reader","ReaderGroup","width","readers","setReaders","preMoveMouseWidths","initialPageX","updateReaders","onMouseMove","index","offsetXPercent","pageX","innerWidth","mouseMoveHandler","r","handler","addEventListener","removeEventListener","nextReader","Math","min","newReader","lastWidth","onReaderChange","dragbar","e","ColorPalette","paletteRows","table","row","swatch","onSelect","Toolbar","textColor","setTextColor","highlightColor","setHighlightColor","isTextColorPaletteOpen","setTextColorPaletteOpen","isHighlightPaletteOpen","setHighlightPaletteOpen","onToggleTextPaletteOpen","open","onToggleHighlightPaletteOpen","toolbar","button","fill","tooltip","borderBottom","Home","_props","About","cssVariables","Settings","setConfig","setCSSVar","cssVar","cssValue","setProperty","onSettingInput","onReset","cssVal","documentElement","getPropertyValue","trim","entry","readerStyles","testDiv","App","rootElement","render","getElementById"],"mappings":"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","file":"main.56f64180.bundle.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"css-bWeIp\",\"swatch\":\"css-18NVn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"testDiv\":\"css-3qFxd\",\"form\":\"css-QY6n6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sup\":\"css-3Jtiz\",\"d\":\"css-1o5Cy\",\"noted\":\"css-Nyajp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"css-Hw5M8\",\"button\":\"css-XxCF7\",\"tooltip\":\"css-39Fw0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"css-G-H7T\",\"navbar\":\"css-2cu9j\",\"navbarGrow\":\"css-sOHx1\",\"navbarBrand\":\"css-3__Qk\",\"form\":\"css-2Cez1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"p\":\"css-k-P1n\",\"q\":\"css-2KJWD\",\"qcol\":\"css-1HONz\"};","module.exports = {\"--primary-text-color\":\"#3b4351\",\"--primary-text-indent\":\"1rem\",\"--primary-theme-color\":\"#0b8dc4\",\"--primary-font-family\":\"-apple-system, system-ui, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, \\\"Helvetica Neue\\\", sans-serif\",\"--secondary-font-family\":\"\\\"Sentinel A\\\", \\\"Sentinel B\\\", \\\"Gentium Plus\\\", \\\"Ezra\\\", Georgia, Times, serif\",\"--reader-padding\":\"1rem\"}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"article\":\"css-3ph2U\",\"reader\":\"css-JUyX7\",\"navContainer\":\"css-1FFzU\",\"windowButton\":\"css-HDosR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sup\":\"css-1Kifr\",\"textarea\":\"css-aYW0c\",\"textareaContainer\":\"css-YTfSd\",\"note\":\"css-1IwTc\",\"inMargin\":\"css-3GW0v\"};","import { h } from 'preact'\nimport { Link, LinkProps } from 'preact-router/match';\nimport styles from './nav.css'\nimport { bugs } from '../../../package.json';\n\nconst NavLink = (props: Omit<LinkProps, 'activeClassName'>) => (\n\t<Link activeClassName=\"\" {...props} />\n)\n\nexport function Nav() {\n\treturn (\n\t\t<header class={styles.header}>\n\t\t\t<nav class={styles.navbarGrow}>\n\t\t\t\t<ul class={styles.navbar}>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<h1>\n\t\t\t\t\t\t\t<NavLink class={styles.navbarBrand} href=\"/\">\n\t\t\t\t\t\t\t\tOpen Bible\n\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</nav>\n\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t<ul class={styles.navbar}>\n\t\t\t\t\t<li><NavLink href=\"/about\">About</NavLink></li>\n\t\t\t\t\t<li><NavLink href=\"/settings\">Settings</NavLink></li>\n\t\t\t\t\t<li><a target=\"_blank\" href={bugs.url}>Report an issue</a></li>\n\t\t\t\t</ul>\n\t\t\t\t<form class={styles.form}>\n\t\t\t\t\t<input placeholder=\"Search\"></input>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</header>\n\t)\n}\n","export function getChapterPath(\n  version: string,\n  book: string,\n  chapter: number\n) {\n\treturn `./static/${version}/${book}-${(chapter + '').padStart(2, '0')}.json`\n}\n\n// TODO: types\nconst cache = {} as { [key: string]: ParagraphType[] }\n\nexport interface NoteType {\n  note: string;\n  // Need these to pass back up on note submit\n  toId: number;\n  fromId: number;\n  isFormOpen: boolean;\n}\n\nexport interface VerseType {\n  t: string;\n  c?: string;\n  n?: number;\n  v?: string | VerseType[];\n  id: number;\n  // Added by frontend\n  parent?: ParagraphType;\n  highlight?: string;\n  noted?: number | null;\n  note?: NoteType;\n}\n\nexport interface ParagraphType {\n  t: string;\n  v: VerseType[]\n  id: number;\n}\n\nexport function getChapter(\n  version: string,\n  book: string,\n  chapter: number\n): Promise<ParagraphType[]> {\n  const path = getChapterPath(version, book, chapter)\n  if (!cache[path]) {\n    return new Promise((resolve, reject) => {\n      fetch(path)\n        .then(res => res.json())\n        .then(paragraphs => {\n          resolve(paragraphs)\n          cache[path] = paragraphs\n        })\n        .catch(reject)\n    })\n  }\n\treturn new Promise(resolve => resolve(cache[path]))\n}\n\nexport const books = {\n\t'GEN': {\n    name: 'Genesis',\n    chapters: 50\n  },\n\t'EXO': {\n    name: 'Exodus',\n    chapters: 40\n  },\n\t'LEV': {\n    name: 'Leviticus',\n    chapters: 27\n  },\n\t'NUM': {\n    name: 'Numbers',\n    chapters: 36\n  },\n\t'DEU': {\n    name: 'Deuteronomy',\n    chapters: 34\n  },\n\t'JOS': {\n    name: 'Joshua',\n    chapters: 24\n  },\n\t'JDG': {\n    name: 'Judges',\n    chapters: 21\n  },\n\t'RUT': {\n    name: 'Ruth',\n    chapters: 4\n  },\n\t'1SA': {\n    name: '1 Samuel',\n    chapters: 31\n  },\n\t'2SA': {\n    name: '2 Samuel',\n    chapters: 24\n  },\n\t'1KI': {\n    name: '1 Kings',\n    chapters: 22\n  },\n\t'2KI': {\n    name: '2 Kings',\n    chapters: 25\n  },\n\t'1CH': {\n    name: '1 Chronicles',\n    chapters: 29\n  },\n\t'2CH': {\n    name: '2 Chronicles',\n    chapters: 36\n  },\n\t'EZR': {\n    name: 'Ezra',\n    chapters: 10\n  },\n\t'NEH': {\n    name: 'Nehamiah',\n    chapters: 13\n  },\n\t'EST': {\n    name: 'Esther',\n    chapters: 10\n  },\n\t'JOB': {\n    name: 'Job',\n    chapters: 42\n  },\n\t'PSA': {\n    name: 'Psalm',\n    chapters: 150\n  },\n\t'PRO': {\n    name: 'Proverbs',\n    chapters: 31\n  },\n\t'ECC': {\n    name: 'Ecclessiates',\n    chapters: 12\n  },\n\t'SNG': {\n    name: 'Song of Solomon',\n    chapters: 8\n  },\n\t'ISA': {\n    name: 'Isiah',\n    chapters: 66\n  },\n\t'JER': {\n    name: 'Jeremiah',\n    chapters: 52\n  },\n\t'LAM': {\n    name: 'Lamentations',\n    chapters: 5\n  },\n\t'EZK': {\n    name: 'Ezekiel',\n    chapters: 48\n  },\n\t'DAN': {\n    name: 'Daniel',\n    chapters: 12\n  },\n\t'HOS': {\n    name: 'Hosea',\n    chapters: 14\n  },\n\t'JOL': {\n    name: 'Joel',\n    chapters: 3\n  },\n\t'AMO': {\n    name: 'Amos',\n    chapters: 9\n  },\n\t'OBA': {\n    name: 'Obadiah',\n    chapters: 1\n  },\n\t'JON': {\n    name: 'Jonah',\n    chapters: 4\n  },\n\t'MIC': {\n    name: 'Micah',\n    chapters: 7\n  },\n\t'NAM': {\n    name: 'Nahum',\n    chapters: 3\n  },\n\t'HAB': {\n    name: 'Habakkuk',\n    chapters: 3\n  },\n\t'ZEP': {\n    name: 'Zephaniah',\n    chapters: 3\n  },\n\t'HAG': {\n    name: 'Haggai',\n    chapters: 2\n  },\n\t'ZEC': {\n    name: 'Zechariah',\n    chapters: 14\n  },\n\t'MAL': {\n    name: 'Malachi',\n    chapters: 4\n  },\n\t'MAT': {\n    name: 'Matthew',\n    chapters: 28\n  },\n\t'MRK': {\n    name: 'Mark',\n    chapters: 16\n  },\n\t'LUK': {\n    name: 'Luke',\n    chapters: 24\n  },\n\t'JHN': {\n    name: 'John',\n    chapters: 21\n  },\n\t'ACT': {\n    name: 'Acts',\n    chapters: 28\n  },\n\t'ROM': {\n    name: 'Romans',\n    chapters: 16\n  },\n\t'1CO': {\n    name: '1 Corinthians',\n    chapters: 16\n  },\n\t'2CO': {\n    name: '2 Corinthians',\n    chapters: 13\n  },\n\t'GAL': {\n    name: 'Galatians',\n    chapters: 6\n  },\n\t'EPH': {\n    name: 'Ephesians',\n    chapters: 6\n  },\n\t'PHP': {\n    name: 'Philippians',\n    chapters: 4\n  },\n\t'COL': {\n    name: 'Colossians',\n    chapters: 4\n  },\n\t'1TH': {\n    name: '1 Thessalonians',\n    chapters: 5\n  },\n\t'2TH': {\n    name: '2 Thessalonians',\n    chapters: 3\n  },\n\t'1TI': {\n    name: '1 Timothy',\n    chapters: 6\n  },\n\t'2TI': {\n    name: '2 Timothy',\n    chapters: 4\n  },\n\t'TIT': {\n    name: 'Titus',\n    chapters: 3\n  },\n\t'PHM': {\n    name: 'Philemon',\n    chapters: 1\n  },\n\t'HEB': {\n    name: 'Hebrews',\n    chapters: 13\n  },\n\t'JAS': {\n    name: 'James',\n    chapters: 5\n  },\n\t'1PE': {\n    name: '1 Peter',\n    chapters: 5\n  },\n\t'2PE': {\n    name: '2 Peter',\n    chapters: 3\n  },\n\t'1JN': {\n    name: '1 John',\n    chapters: 5\n  },\n\t'2JN': {\n    name: '2 John',\n    chapters: 1\n  },\n\t'3JN': {\n    name: '3 John',\n    chapters: 1\n  },\n\t'JUD': {\n    name: 'Jude',\n    chapters: 1\n  },\n\t'REV': {\n    name: 'Revelation',\n    chapters: 22\n  },\n}\n\nexport const texts = {\n  'en_ult': 'unfoldingWord® Literal Text',\n  'en_ust': 'unfoldingWord® Simplified Text',\n}\n\nexport type BookNames = keyof typeof books\n","export function classnames(...args: (string | boolean | null | undefined)[]): string {\n\treturn Array.prototype.slice.call(args).filter(Boolean).join(' ')\n}\n","import { useState, StateUpdater } from 'preact/hooks'\n\nexport function useLocalStorage<S>(key: string, initialValue: S): [S, StateUpdater<S>] {\n  const [storedValue, setStoredValue] = useState(() => {\n    const item = window.localStorage.getItem(key);\n    return item ? JSON.parse(item) : initialValue;\n  });\n\tconst setValue = (value: any) => {\n    setStoredValue(value);\n    window.localStorage.setItem(key, JSON.stringify(value));\n  };\n\n  return [storedValue, setValue];\n}\n","// TODO: use custom loader on ../app.css\nexport const cssVars = [\n  '--primary-text-color',\n  '--primary-text-indent',\n  '--primary-theme-color',\n  '--primary-font-family',\n]\n","import { ParagraphType, VerseType } from \".\"\n\ntype Visitor = (verse: VerseType, parent?: ParagraphType) => void\n\nconst visit = (\n\tverse: ParagraphType | VerseType,\n\tvisitor: Visitor,\n\tparent?: ParagraphType\n) => {\n\tvisitor(verse, parent)\n\tif (Array.isArray(verse.v)) {\n\t\t(verse as ParagraphType).v.forEach(v => visit(v, visitor, verse as ParagraphType))\n\t}\n}\n\nexport const visitParagraphs = (\n\tparagraphs: ParagraphType[] | undefined,\n\tvisitor:Visitor\n) => {\n\tif (!paragraphs) {\n\t\treturn\n\t}\n\tparagraphs.forEach(p => visit(p, visitor))\n}","type Listener = (...args: any) => void\n\nconst events = { } as { [key: string]: Listener[] }\n\nexport function subscribe(event: string, listener: Listener) {\n\tevents[event] = events[event] || []\n\n\tevents[event].push(listener)\n}\n\nexport function unsubscribe(event: string, listener: Listener) {\n\tfor (let i = 0; i < events[event].length; i++) {\n\t\tif (events[event][i] === listener) {\n\t\t\tevents[event].splice(i, 1)\n\t\t}\n\t}\n}\n\nexport function emit(event: string, ...args: any) {\n\tconst listeners = events[event] || []\n\tlisteners.forEach(listener => listener(...args))\n}\n","export * from './books'\nexport * from './classnames'\nexport * from './useLocalStorage'\nexport * from './cssVars'\nexport * from './visitParagraph'\nexport * from './eventEmitter'","import { SettingsType } from \"../../pages\"\n\n// Handles selecting anywhere in <article> of <Reader>\nexport const selectedNodes: Node[] = []\nconst copyableTags = ['SPAN', 'U']\nconst copyStyles = {\n\tBODY: [\n\t\t'color',\n\t\t'background-color',\n\t\t'font-family',\n\t\t'font-size',\n\t],\n\tP: [\n\t\t'padding-left',\n\t\t'margin',\n\t\t'text-indent',\n\t],\n\tSPAN: [\n\t\t'color',\n\t\t'background-color',\n\t\t'text-decoration',\n\t],\n}\n\nfunction snapToWords(range: Range) {\n\trange.setStart(range.startContainer, 0)\n\tconst length = (range.endContainer as Text).length\n\tif (length) {\n\t\trange.setEnd(range.endContainer, length)\n\t}\n}\n\n// Select API doesn't yet allow selecting multiple ranges\n// Just traverse selected Range and add a class to tags\nfunction iterateOverRange(range: Range, rangeFn: (node: Node) => void) {\n\tconst it = document.createNodeIterator(range.commonAncestorContainer)\n\tlet hitFirstNode = false\n\tlet node: Node\n\twhile (node = it.nextNode() as Node) {\n\t\tif (!hitFirstNode && node === range.startContainer) {\n\t\t\thitFirstNode = true\n\t\t} else if (!hitFirstNode || !node) {\n\t\t\tcontinue\n\t\t}\n\n\t\trangeFn(node)\n\n\t\tif (node === range.endContainer) {\n\t\t\tbreak\n\t\t}\n\t}\n}\n\nfunction getStyles(node: Node) {\n\tconst nodeStyles = getComputedStyle(node as Element)\n\n\treturn (copyStyles[node.nodeName as keyof typeof copyStyles] || [])\n\t\t.filter(style => nodeStyles[style as any])\n\t\t.map(style => `${style}: ${nodeStyles[style as any].replace(/\"/g, '')};`)\n\t\t.join(' ')\n}\n\nexport function getRange() {\n\tconst selection = window.getSelection()\n\tif (!selection || selection.rangeCount === 0) {\n\t\treturn undefined\n\t}\n\tconst range = selection.getRangeAt(0) as Range\n\tif (range.startContainer === range.endContainer &&\n\t\t\trange.startOffset === range.endOffset) {\n\t\treturn undefined\n\t}\n\n\treturn range\n}\n\nexport function onSelectChange() {\n\tconst range = getRange()\n\tif (!range) {\n\t\treturn\n\t}\n\n\tsnapToWords(range)\n\t// Unselect all previously selected nodes\n\tselectedNodes.length = 0\n\t\n\titerateOverRange(range, node => {\n\t\tif (node.nodeName === '#text') {\n\t\t\tselectedNodes.push(node.parentNode as Node)\n\t\t}\n\t})\n}\n\n// TODO\nexport function onDoubleClickVerseNumber(ev: any) {\n\tconsole.log('TODO: select verse', ev)\n  ev.preventDefault()\n}\n\nexport function onCopy(ev: any, config: SettingsType) {\n\tconst range = getRange()\n\tif (!range || config.selectVerseNums === 'default') {\n\t\treturn\n\t}\n\tlet toCopy = ''\n\tlet toCopyHTML = `<html>\n<head>\n\t<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n</head>\n<body style=\"${getStyles(document.body)}\">\n\t<meta charset=\"utf-8\">`\n\tlet addedFirstPara = false\n\titerateOverRange(range, node => {\n\t\tconst parentNode = node.parentNode as Node\n\t\tif (node.nodeName === '#text'\n\t\t\t\t&& copyableTags.includes(parentNode.nodeName)) {\n\t\t\ttoCopy += node.textContent\n\t\t\tif (!addedFirstPara) {\n\t\t\t\ttoCopyHTML += `<p style=\"${getStyles(parentNode.parentNode as Node)}\">`\n\t\t\t\taddedFirstPara = true\n\t\t\t}\n\t\t\tconst tag = parentNode.nodeName.toLowerCase()\n\t\t\ttoCopyHTML += `<${tag} style=\"${getStyles(parentNode)}\">${node.textContent}</${tag}>`\n\t\t}\n\t\telse if (node.nodeName === 'P') {\n\t\t\ttoCopy += '\\n'\n\t\t\ttoCopyHTML += `</p><p style=\"${getStyles(node)}\">`\n\t\t}\n\t\telse if (node.nodeName === 'SUP') {\n\t\t\ttoCopy += ' '\n\t\t\ttoCopyHTML += ' '\n\t\t}\n\t})\n\ttoCopyHTML += '</p></body></html>'\n\tev.clipboardData.setData('text/html', toCopyHTML)\n\tev.clipboardData.setData('text/plain', toCopy)\n\tev.preventDefault()\n}\n","import { createContext } from 'preact'\nimport { NoteType } from '../../utils'\n\ninterface NoteContextType {\n  onNoteSubmit: (note: NoteType) => void;\n  onNoteRemove: (note: NoteType) => void;\n}\n\nexport const NoteContext = createContext({\n  onNoteSubmit: (_note: NoteType) => {},\n  onNoteRemove: (_note: NoteType) => {},\n} as NoteContextType)\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"}, []), \"\\n\"]);\n};\n\n        ","import { h, Fragment } from 'preact'\nimport { useState, useEffect, useRef } from 'preact/hooks'\nimport styles from './versenote.css'\nimport { NoteContext } from './versenotecontext'\nimport { NoteType, VerseType, classnames } from '../../utils'\nimport EditIcon from '../../icons/md-edit.svg'\nimport paragraphStyles from '../paragraphs/paragraph.css'\nimport { getParagraphClass } from './paragraph'\n\ninterface VerseNoteProps {\n  verse: VerseType;\n}\n\nexport function VerseNote(props: VerseNoteProps) {\n  const textAreaRef = useRef<HTMLTextAreaElement>()\n  const note = props.verse.note as NoteType\n  const [isFormOpen, setFormOpen] = useState(note.isFormOpen)\n  const [isNoteOpen, setNoteOpen] = useState(false)\n\n  useEffect(() => {\n    if (note.isFormOpen && textAreaRef.current) {\n      textAreaRef.current.focus()\n    }\n  }, [])\n\n  const onSubmit = (ev: any, onNoteSubmit: (note: NoteType) => void) => {\n    ev.preventDefault()\n    \n    onNoteSubmit(note)\n    setFormOpen(false)\n    setNoteOpen(true)\n  }\n\n  const onInput = (ev: any) => {\n    note.note = ev.target.value\n  }\n\n  const onOpenForm = (_ev: any) => {\n    if (textAreaRef.current) {\n      textAreaRef.current.focus()\n    }\n\n    setFormOpen(isOpen => !isOpen)\n    setNoteOpen(false)\n  }\n\n  const toggleNoteOpen = (_ev: any) => {\n    if (!isFormOpen) {\n      setNoteOpen(isOpen => !isOpen)\n    } else {\n      setFormOpen(false)\n    }\n  }\n\n  const marginClass = getParagraphClass(props.verse.parent) === paragraphStyles.q\n    ? styles.inMargin\n    : ''\n\n  return (\n    <Fragment>\n      <sup\n        class={styles.sup}\n        onClick={toggleNoteOpen}\n      >\n        N\n      </sup>\n      {isFormOpen && (\n        <NoteContext.Consumer>\n          {({ onNoteSubmit, onNoteRemove }) => (\n            <form\n              onSubmit={(ev: any) => onSubmit(ev, onNoteSubmit)}\n              onReset={(_ev: any) => onNoteRemove(note)}\n              class={marginClass}\n            >\n              <div class={styles.textareaContainer}>\n                <textarea\n                  name=\"note\"\n                  class={styles.textarea}\n                  onInput={onInput}\n                  value={note.note}\n                  placeholder=\"Add note\"\n                  ref={textAreaRef}\n                />\n              </div>\n              <input type=\"reset\" value=\"Remove\" />\n              <input type=\"submit\" value=\"Submit\" />\n            </form>\n          )}\n        </NoteContext.Consumer>\n      )}\n      {isNoteOpen && (\n        <div class={classnames(styles.note, marginClass)}>\n          {note.note}\n          <button class={styles.sup} onClick={onOpenForm}>\n            <EditIcon width=\"12px\" />\n          </button>\n        </div>\n      )}\n    </Fragment>\n  )\n}\n","import { h, Fragment } from 'preact'\nimport { classnames } from '../../utils/classnames'\nimport { onDoubleClickVerseNumber } from './select'\nimport styles from './verse.css'\nimport highlightStyles from './highlights.css'\nimport { VerseType } from '../../utils/books'\nimport { VerseNote } from './versenote'\n\nlet lastVerse: VerseType\nconst startPunct = /['\"“‘\\[\\(\\-]/\nconst endPunct = /['\".”’,?!:;\\]\\)\\-]/\nconst suffixes = [\n  's', // Possesion like \"Pharaoh’s\"\n  'th', // Number like \"480th year\"\n]\n\ninterface VerseProps {\n  verse: VerseType;\n}\n\nconst isNoted = (verse: VerseType) => Boolean(verse.noted) || verse.noted === 0\n\nexport function Verse(props: VerseProps) {\n  const verse = props.verse\n  const style = verse.highlight\n    ? { background: verse.highlight } as { background: string }\n    : {}\n  let prependSpace = verse.t === 'w' || verse.t === 't' \n  if (lastVerse && (\n        lastVerse.n\n        || startPunct.test(lastVerse.v as string)\n        || endPunct.test(verse.v as string)\n        || suffixes.includes(verse.v as string)\n    )) {\n    prependSpace = false\n  }\n  const res = (\n    <Fragment>\n      {prependSpace &&\n        <span\n          class={classnames(\n            lastVerse && isNoted(lastVerse) && isNoted(verse) && styles.noted\n          )}\n          style={style}\n        >\n          {' '}\n        </span>\n      }\n      {verse.n &&\n        <sup\n          onDblClick={onDoubleClickVerseNumber}\n          class={classnames(\n            styles.sup,\n          )}\n          style={style}\n        >\n          {verse.n}\n        </sup>\n      }\n      {verse.v &&\n        <span\n          data-id={verse.id}\n          class={classnames(\n            styles[verse.t],\n            isNoted(verse) && styles.noted\n          )}\n          style={style}\n        >\n          {verse.v}\n        </span>\n      }\n      {verse.note &&\n        <VerseNote verse={verse} />\n      }\n    </Fragment>\n  )\n  lastVerse = verse\n  return res\n}\n","import { h, Fragment } from 'preact'\nimport { ParagraphType, VerseType } from '../../utils/books'\nimport { Paragraphs } from './paragraphs'\nimport { Verse } from './verse'\nimport styles from './paragraph.css'\n\nexport function getParagraphClass(paragraph?: ParagraphType) {\n  if (!paragraph) {\n    return ''\n  }\n  else if (paragraph.t === 'q' && paragraph.v[0].t === 'v') {\n    return styles.qcol\n  }\n\n  return styles[paragraph.t]\n}\n\ninterface ParagraphProps {\n  paragraph: ParagraphType | VerseType;\n}\n\nexport function Paragraph(props: ParagraphProps) {\n  const paragraph = props.paragraph\n\n  if (Array.isArray(paragraph.v)) {\n    const className = getParagraphClass(paragraph as ParagraphType)\n    return (\n      <p data-id={paragraph.id} class={className}>\n        <Paragraphs paragraphs={paragraph.v} />\n      </p>\n    )\n  }\n\n  return <Verse verse={paragraph} />\n}\n","import { h, Fragment } from 'preact'\nimport { Paragraph } from './paragraph'\nimport { ParagraphType, VerseType } from '../../utils/books'\n\ninterface ParagraphsProps {\n  paragraphs?: (ParagraphType | VerseType)[];\n}\n\nexport function Paragraphs(props: ParagraphsProps) {\n  if (!props.paragraphs) {\n    return <div>Loading</div>\n  }\n  return (\n    <Fragment>\n      {props.paragraphs.map(p =>\n        <Paragraph paragraph={p} />\n      )}\n    </Fragment>\n  )\n}\n","import { h } from 'preact'\nimport { useState, useRef, useEffect } from 'preact/hooks'\nimport { getChapter, books, texts, BookNames, useLocalStorage, subscribe, visitParagraphs } from '../../utils'\nimport { ParagraphType, NoteType } from '../../utils/books'\nimport { Highlight, Highlights } from '../../types/highlights'\nimport { onSelectChange, onCopy, selectedNodes, getRange } from '../paragraphs/select'\nimport { NoteContext } from '../paragraphs/versenotecontext'\nimport { Paragraphs } from '../paragraphs/paragraphs'\nimport { Notes } from '../../types/notes'\nimport styles from './reader.css'\nimport { defaultSettings } from '../../pages'\n// import { onAddNote } from '../../actions/onAddNote'\n\nconst clearSelection = () => {\n\tconst selection = document.getSelection()\n\tif (selection) {\n\t\tselection.removeAllRanges()\n\t}\n}\n\nexport interface ReaderProps {\n\ttext: string;\n\tbook: BookNames;\n\tchapter: number;\n\t// TODO: how to copy JSXInternal.HTMLAttributes<HTMLElement>.style?: string | {\n\tstyle?: { [key: string]: string | number } | string;\n\tonAddReader?: () => void;\n\tonCloseReader?: () => void;\n\tonNavChange?: (text: string, book: BookNames, chapter: number) => void\n}\n\nexport function Reader(props = {\n\tbook: books.GEN.name,\n\tchapter: 1,\n\ttext: Object.keys(texts)[0]\n} as ReaderProps) {\n\tconst [paragraphs, setParagraphs] = useState([] as ParagraphType[])\n\tconst [highlights, setHighlights] = useLocalStorage(`highlight1-${props.book}-${props.chapter}`, {} as Highlights);\n\tconst [notes, setNotes] = useLocalStorage(`note1-${props.book}-${props.chapter}`, {} as Notes);\n  const [config,] = useLocalStorage('settings', defaultSettings);\n\tconst divRef = useRef<HTMLDivElement>()\n\n\tuseEffect(() => {\n\t\tgetChapter(props.text, props.book, props.chapter)\n\t\t\t.then(paragraphs => {\n\t\t\t\tlet highlight: Highlight | undefined\n\t\t\t\tlet note: NoteType | undefined\n\t\t\t\tvisitParagraphs(paragraphs, (verse, parent) => {\n\t\t\t\t\tverse.parent = parent\n\t\t\t\t\tif (!highlight) {\n\t\t\t\t\t\thighlight = highlights[verse.id]\n\t\t\t\t\t}\n\t\t\t\t\tif (highlight) {\n\t\t\t\t\t\tverse.highlight = highlight.color\n\t\t\t\t\t\tif (verse.id >= highlight.toId) {\n\t\t\t\t\t\t\thighlight = undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst savedNote = notes[verse.id]\n\t\t\t\t\tif (!note && savedNote) {\n\t\t\t\t\t\tnote = {\n\t\t\t\t\t\t\tfromId: verse.id,\n\t\t\t\t\t\t\ttoId: savedNote.toId,\n\t\t\t\t\t\t\tnote: savedNote.note,\n\t\t\t\t\t\t\tisFormOpen: false,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (note) {\n\t\t\t\t\t\tverse.noted = verse.id\n\t\t\t\t\t\tif (verse.id >= note.toId) {\n\t\t\t\t\t\t\tverse.note = note\n\t\t\t\t\t\t\tnote = undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tsetParagraphs(paragraphs)\n\t\t\t\tsubscribe('ADD_NOTE', () => onAddNote(paragraphs))\n\t\t\t\tsubscribe('ADD_HIGHLIGHT', (color: string) => onAddHighlight(paragraphs, color))\n\t\t\t})\n\t}, [])\n\n\tconst onNavChange = (text: string, book: BookNames, chapter: number) => {\n\t\tgetChapter(text, book, chapter)\n\t\t\t.then(paragraphs => {\n\t\t\t\tsetParagraphs(paragraphs)\n\t\t\t\tif (divRef.current) {\n\t\t\t\t\tdivRef.current.scrollTop = 0\n\t\t\t\t}\n\t\t\t})\n\t\tif (props.onNavChange) {\n\t\t\tprops.onNavChange(text, book, chapter)\n\t\t}\n\t}\n\n\tconst onBookChange = (ev: any) => {\n\t\tconst book = ev.target.value as BookNames\n\t\tlet chapter = props.chapter\n\t\tif (chapter > books[book].chapters)\n\t\t\tchapter = books[book].chapters\n\t\tonNavChange(props.text, book, chapter)\n\t}\n\n\tconst onChapterChange = (ev: any) => {\n\t\tonNavChange(props.text, props.book, ev.target.value)\n\t}\n\n\tconst onTextChange = (ev: any) => {\n\t\tonNavChange(ev.target.value, props.book, props.chapter)\n\t}\n\n\tconst getSelectedNodes = () => {\n\t\tif (!getRange()) {\n\t\t\treturn\n\t\t}\n\t\tconst ids = selectedNodes\n\t\t\t.filter(node => divRef.current && divRef.current.contains(node))\n\t\t\t.map(node => (node as Element).getAttribute('data-id'))\n\t\t\t.filter(Boolean)\n\t\tif (ids.length > 0) {\n\t\t\treturn {\n\t\t\t\tfromId: +(ids as string[])[0],\n\t\t\t\ttoId: +(ids as string[])[ids.length - 1]\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onAddNote = (paragraphs: ParagraphType[]) => {\n\t\tconst selected = getSelectedNodes()\n\t\tif (selected && selected.fromId && selected.toId) {\n\t\t\tconst fromId = selected.fromId\n\t\t\tconst toId = selected.toId\n\t\t\tvisitParagraphs(paragraphs, v => {\n\t\t\t\tif (v.id >= fromId && v.id <= toId) {\n\t\t\t\t\tv.noted = selected.fromId\n\t\t\t\t}\n\t\t\t\tif (v.id === toId) {\n\t\t\t\t\tv.note = { fromId, toId, note: '', isFormOpen: true }\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tclearSelection()\n\t\t\tsetParagraphs(Object.assign([], paragraphs))\n\t\t}\n\t}\n\n\tconst onAddHighlight = (paragraphs: ParagraphType[], color: string) => {\n\t\tconst selected = getSelectedNodes()\n\t\tif (!selected) {\n\t\t\treturn\n\t\t}\n\n\t\tif (selected.fromId && selected.toId) {\n\t\t\tconst fromId = selected.fromId\n\t\t\tconst toId = selected.toId\n\t\t\tvisitParagraphs(paragraphs, verse => {\n\t\t\t\tif (verse.id >= fromId && verse.id <= toId) {\n\t\t\t\t\tverse.highlight = color\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tclearSelection()\n\t\t\thighlights[fromId] = { toId: toId, color }\n\t\t\tsetHighlights(Object.assign({}, highlights))\n\t\t\tsetParagraphs(Object.assign([], paragraphs))\n\t\t}\n\t}\n\n\tconst onNoteSubmit = (note: NoteType) => {\n\t\tnotes[note.fromId] = { toId: note.toId, note: note.note }\n\t\tsetNotes(Object.assign({}, notes))\n\t\tsetParagraphs(Object.assign([], paragraphs))\n\t}\n\n\tconst onNoteRemove = (note: NoteType) => {\n\t\tconst fromId = note.fromId\n\t\tconst toId = note.toId\n\t\tvisitParagraphs(paragraphs, v => {\n\t\t\tif (v.id >= fromId && v.id <= toId) {\n\t\t\t\tdelete v.noted\n\t\t\t}\n\t\t\tif (v.id === toId) {\n\t\t\t\tdelete v.note\n\t\t\t}\n\t\t})\n\t\tsetParagraphs(Object.assign([], paragraphs))\n\t}\n\n\tconst style = props.style || {}\n\treturn (\n\t\t<article class={styles.article} style={style}>\n\t\t\t<div class={styles.navContainer}>\n\t\t\t\t<nav>\n\t\t\t\t\t<select name=\"book\" value={props.book} onChange={onBookChange}>\n\t\t\t\t\t\t{Object.entries(books).map(([key, val]) =>\n\t\t\t\t\t\t\t<option value={key} key={key}>{val.name}</option>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</select>\n\t\t\t\t\t<select name=\"chapter\" value={props.chapter} onChange={onChapterChange}>\n\t\t\t\t\t\t{Array.apply(null, Array(books[props.book].chapters))\n\t\t\t\t\t\t\t.map((_el: unknown, i: number) =>\n\t\t\t\t\t\t\t\t<option value={i + 1} key={i}>{i + 1}</option>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</select>\n\t\t\t\t\t<select name=\"text\" value={props.text} onChange={onTextChange}>\n\t\t\t\t\t\t{Object.entries(texts).map(([key, val]) => \n\t\t\t\t\t\t\t<option value={key} key={key}>{key}</option>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</select>\n\t\t\t\t</nav>\n\t\t\t\t<div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={props.onAddReader}\n\t\t\t\t\t\tclass={styles.windowButton}\n\t\t\t\t\t>\n\t\t\t\t\t\t+\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={props.onCloseReader}\n\t\t\t\t\t\tclass={styles.windowButton}\n\t\t\t\t\t>\n\t\t\t\t\t\tx\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tref={divRef}\n\t\t\t\tonMouseUp={onSelectChange}\n\t\t\t\tonKeyUp={onSelectChange}\n\t\t\t\tclass={styles.reader}\n\t\t\t\tonCopy={(ev: any) => onCopy(ev, config)}\n\t\t\t\ttabIndex={0}\n\t\t\t>\n\t\t\t\t<NoteContext.Provider value={{ onNoteSubmit, onNoteRemove }}>\n\t\t\t\t\t<Paragraphs\tparagraphs={paragraphs} />\n\t\t\t\t</NoteContext.Provider>\n\t\t\t</div>\n\t\t</article>\n\t)\n}\n","import { h, Fragment } from 'preact'\nimport { Reader, ReaderProps } from '../reader/reader'\nimport { BookNames, useLocalStorage } from '../../utils'\nimport styles from './readergroup.css'\n\ninterface ReaderState extends ReaderProps {\n\twidth: number;\n}\n\n/*\n * Contains many <Reader>s and handles resizing them\n */\nexport function ReaderGroup() {\n\tconst [readers, setReaders] = useLocalStorage('readers', [\n\t\t{ text: 'en_ult', book: 'LUK' as BookNames, chapter: 4, width: 50 },\n\t\t{ text: 'en_ult', book: 'PSA' as BookNames, chapter: 119, width: 50 },\n\t] as ReaderState[])\n\tlet preMoveMouseWidths: number[] = []\n\tlet initialPageX = 0\n\n\n\tconst updateReaders = () => {\n\t\tsetReaders(Object.assign([], readers))\n\t}\n\n\tconst onMouseMove = (ev: any, index: number) => {\n\t\tev.preventDefault()\n\t\tconst offsetXPercent = (ev.pageX - initialPageX) / window.innerWidth\n\t\treaders.forEach((reader, i) => {\n\t\t\tif (i === index)\n\t\t\t\treader.width = preMoveMouseWidths[i] + offsetXPercent\n\t\t\telse if (i === index + 1)\n\t\t\t\treader.width = preMoveMouseWidths[i] - offsetXPercent\n\t\t})\n\t\tupdateReaders()\n\t}\n\n\tconst mouseMoveHandler = (ev: any, index: any) => {\n\t\tev.preventDefault()\n\t\tinitialPageX = ev.pageX\n\t\tpreMoveMouseWidths = readers.map(r => r.width)\n\t\t\n\t\tconst handler = (ev: any) => onMouseMove(ev, index)\n\t\tdocument.addEventListener('mousemove', handler)\n\t\tdocument.addEventListener('mouseup', _ev =>\n\t\t\tdocument.removeEventListener('mousemove', handler))\n\t}\n\n\tconst onAddReader = (index: number) => {\n\t\tindex++\n\t\tconst nextReader = readers[Math.min(index, readers.length - 1)]\n\t\tconst newReader = { text: 'en_ult', book: 'MAT' as BookNames, chapter: 1, width: nextReader.width / 2 }\n\t\tnextReader.width /= 2\n\t\treaders.splice(index, 0, newReader)\n\t\tupdateReaders()\n\t}\n\n\tconst onCloseReader = (index: number) => {\n\t\tconst lastWidth = readers[index].width\n\t\treaders.splice(index, 1)\n\t\treaders.forEach(reader => reader.width += lastWidth / readers.length)\n\t\tupdateReaders()\n\t}\n\n\tconst onReaderChange = (reader: ReaderState, text: string, book: BookNames, chapter: number) => {\n\t\treader.text = text\n\t\treader.book = book\n\t\treader.chapter = chapter\n\t\tupdateReaders()\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{readers.map((reader, index) => (\n\t\t\t\t<Fragment key={index}>\n\t\t\t\t\t<Reader\n\t\t\t\t\t\ttext={reader.text}\n\t\t\t\t\t\tbook={reader.book}\n\t\t\t\t\t\tchapter={reader.chapter}\n\t\t\t\t\t\tstyle={{ width: `${reader.width * 100}%` }}\n\t\t\t\t\t\tonAddReader={() => onAddReader(index)}\n\t\t\t\t\t\tonCloseReader={() => onCloseReader(index)}\n\t\t\t\t\t\tonNavChange={(text, book, chapter) => onReaderChange(reader, text, book, chapter)}\n\t\t\t\t\t/>\n\t\t\t\t\t{index !== readers.length - 1 &&\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass={styles.dragbar}\n\t\t\t\t\t\t\tonMouseDown={e => mouseMoveHandler(e, index)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</Fragment>\n\t\t\t))}\n\t\t</Fragment>\n\t)\n}\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n  \", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0V0z\"}, []), \"\\n  \", h('path', {\"d\":\"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM17 11h-4v4h-2v-4H7V9h4V5h2v4h4v2z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"d\":\"M9.62,12L12,5.67L14.37,12M11,3L5.5,17H7.75L8.87,14H15.12L16.25,17H18.5L13,3H11Z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n  \", h('path', {\"d\":\"M4,17L6.75,14.25L6.72,14.23C6.14,13.64 6.14,12.69 6.72,12.11L11.46,7.37L15.7,11.61L10.96,16.35C10.39,16.93 9.46,16.93 8.87,16.37L8.24,17H4M15.91,2.91C16.5,2.33 17.45,2.33 18.03,2.91L20.16,5.03C20.74,5.62 20.74,6.57 20.16,7.16L16.86,10.45L12.62,6.21L15.91,2.91Z\"}, []), \"\\n\"]);\n};\n\n        ","export { default as AddCommentIcon } from './md-add-comment.svg'\nexport { default as EditIcon } from './md-edit.svg'\nexport { default as FormatBoldIcon } from './md-format-bold.svg'\nexport { default as FormatItalicIcon } from './md-format-italic.svg'\nexport { default as FormatUnderlinedIcon } from './md-format-underlined.svg'\nexport { default as UndoIcon } from './md-undo.svg'\nexport { default as RedoIcon } from './md-redo.svg'\nexport { default as TextColorIcon } from './md-format-text-color.svg'\nexport { default as HighlightColorIcon } from './md-format-highlight.svg'\n","import { h } from 'preact'\nimport styles from './colorpalette.css'\n\ninterface ColorPaletteProps {\n\tonSelect: (color: string) => void;\n}\n\nexport function ColorPalette(props: ColorPaletteProps) {\n\tconst paletteRows = [\n\t\t[\n\t\t\t'rgb(0,0,0)',\n\t\t\t'rgb(67,67,67)',\n\t\t\t'rgb(102,102,102)',\n\t\t\t'rgb(153,153,153)',\n\t\t\t'rgb(183,183,183)',\n\t\t\t'rgb(204,204,204)',\n\t\t\t'rgb(217,217,217)',\n\t\t\t'rgb(239,239,239)',\n\t\t\t'rgb(243,243,243)',\n\t\t\t'rgb(255,255,255)',\n\t\t],\n\t\t[\n\t\t\t'rgb(152,0,0)',\n\t\t\t'rgb(255,0,0)',\n\t\t\t'rgb(255,153,0)',\n\t\t\t'rgb(255,255,0)',\n\t\t\t'rgb(0,255,0)',\n\t\t\t'rgb(0,255,255)',\n\t\t\t'rgb(74,134,232)',\n\t\t\t'rgb(0,0,255)',\n\t\t\t'rgb(153,0,255)',\n\t\t\t'rgb(255,0,255)',\n\t\t],\n\t]\n\n\treturn (\n\t\t<table class={styles.table}>\n\t\t\t<tbody>\n\t\t\t\t{paletteRows.map(row =>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{row.map(color =>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass={styles.swatch}\n\t\t\t\t\t\t\t\t\tstyle={{ background: color }}\n\t\t\t\t\t\t\t\t\tonClick={() => props.onSelect(color)}></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</tr>\n\t\t\t\t)}\n\t\t\t</tbody>\n\t\t</table>\n\t)\n}","import { h } from 'preact'\nimport { useState } from 'preact/hooks'\nimport styles from './toolbar.css'\nimport { AddCommentIcon, UndoIcon, RedoIcon, FormatBoldIcon, FormatItalicIcon, FormatUnderlinedIcon, TextColorIcon, HighlightColorIcon } from '../../icons'\nimport { emit } from '../../utils/eventEmitter'\nimport { ColorPalette } from './colorpalette'\n\nexport function Toolbar() {\n\tconst [textColor, setTextColor] = useState('rgb(255,0,0)')\n\tconst [highlightColor, setHighlightColor] = useState('rgb(255,0,0)')\n\tconst [isTextColorPaletteOpen, setTextColorPaletteOpen] = useState(false)\n\tconst [isHighlightPaletteOpen, setHighlightPaletteOpen] = useState(false)\n\n\tconst onToggleTextPaletteOpen = () => {\n\t\tsetTextColorPaletteOpen(open => !open)\n\t\tsetHighlightPaletteOpen(false)\n\t}\n\n\tconst onToggleHighlightPaletteOpen = () => {\n\t\tsetHighlightPaletteOpen(open => !open)\n\t\tsetTextColorPaletteOpen(false)\n\t}\n\n\treturn (\n\t\t<div class={styles.toolbar} role=\"toolbar\">\n\t\t\t<button class={styles.button}>\n\t\t\t\t<UndoIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Undo</span>\n\t\t\t</button>\n\t\t\t<button class={styles.button}>\n\t\t\t\t<RedoIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Redo</span>\n\t\t\t</button>\n\t\t\t<button class={styles.button}>\n\t\t\t\t<FormatBoldIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Bold</span>\n\t\t\t</button>\n\t\t\t<button class={styles.button}>\n\t\t\t\t<FormatItalicIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Italic</span>\n\t\t\t</button>\n\t\t\t<button class={styles.button}>\n\t\t\t\t<FormatUnderlinedIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Underline</span>\n\t\t\t</button>\n\t\t\t<button class={styles.button} onClick={onToggleTextPaletteOpen}>\n\t\t\t\t<TextColorIcon style={{ fill: '#5f6368', borderBottom: `4px solid ${textColor}` }} />\n\t\t\t\t<span class={styles.tooltip}>Text color</span>\n\t\t\t\t{isTextColorPaletteOpen && \n\t\t\t\t\t<ColorPalette onSelect={(color: string) => {\n\t\t\t\t\t\tconsole.log('color', color)\n\t\t\t\t\t\tsetTextColor(color)\n\t\t\t\t\t}} />\n\t\t\t\t}\n\t\t\t</button>\n\t\t\t<button class={styles.button} onClick={onToggleHighlightPaletteOpen}>\n\t\t\t\t<HighlightColorIcon style={{ fill: '#5f6368', borderBottom: `4px solid ${highlightColor}` }} />\n\t\t\t\t<span class={styles.tooltip}>Highlight color</span>\n\t\t\t\t{isHighlightPaletteOpen && \n\t\t\t\t\t<ColorPalette onSelect={(color: string) => {\n\t\t\t\t\t\tsetHighlightColor(color)\n\t\t\t\t\t\temit('ADD_HIGHLIGHT', color)\n\t\t\t\t\t}} />\n\t\t\t\t}\n\t\t\t</button>\n\t\t\t<button class={styles.button} onClick={() => emit('ADD_NOTE')}>\n\t\t\t\t<AddCommentIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Add comment</span>\n\t\t\t</button>\n\t\t\t{/* <Dropdown\n\t\t\t\tisRight\n\t\t\t\ticon=\"▼\"\n\t\t\t\tselected={<HighlighterIcon height=\"12px\" style=\"fill: #5f6368\" />}\n\t\t\t\tonSelect={(index: number) => {\n\t\t\t\t\tthis.setState({ selectedColor: highlighterColors[index] })\n\t\t\t\t\tthis.onHighlight(highlighterColors[index])\n\t\t\t\t}}\n\t\t\t\tonClick={() => this.onHighlight(selectedColor)}\n\t\t\t\tstyle={{ borderBottom: `4px solid ${this.state.selectedColor}` }}\n\t\t\t>\n\t\t\t\t{highlighterColors.map(color =>\n\t\t\t\t\t<HighlighterIcon value={color} height=\"12px\" style={`fill: ${color};`} />\n\t\t\t\t)}\n\t\t\t</Dropdown> */}\n\t\t</div>\n\t)\n}","export * from './nav/nav'\nexport * from './reader/reader'\nexport * from './readergroup/readergroup'\nexport * from './toolbar/toolbar'","import { h, Fragment } from 'preact'\nimport { Nav, ReaderGroup, Toolbar } from '../components'\n\nexport const Home = (_props: { path: String }) => {\n\treturn (\n\t\t<Fragment>\n\t\t\t<Nav />\n\t\t\t<Toolbar />\n\t\t\t<main>\n\t\t\t\t<ReaderGroup />\n\t\t\t</main>\n\t\t</Fragment>\n\t)\n}","import { h, Fragment } from 'preact'\nimport { Nav } from '../components'\n\nexport function About(_props: { path: String }) {\n\treturn (\n\t\t<Fragment>\n\t\t\t<Nav />\n\t\t\t<main>\n\t\t\t\t<div>\n\t\t\t\t\t<h2>About</h2>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThis is a site that (so far) renders\n\t\t\t\t\t\tthe <a href=\"https://git.door43.org/unfoldingWord/en_ult\">en_ult</a>\n\t\t\t\t\t\t&nbsp;and <a href=\"https://git.door43.org/unfoldingWord/en_ust\">en_ust</a> translations.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tIt does so by rendering the USFM markdown to JSON\n\t\t\t\t\t\tin <a href=\"https://github.com/thesmartwon/usfm2json\">usfm2json</a> to paragraphs,\n\t\t\t\t\t\tand then rendering those paragraphs to HTML following some rules for verse numbers,\n\t\t\t\t\t\tpunctuation, highlights, and notes. Currently your highlights and notes are saved\n\t\t\t\t\t\tto your browser's local storage.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tIt's written using&nbsp;\n\t\t\t\t\t\t<a href=\"https://preactjs.com/\">Preact</a>\n\t\t\t\t\t\t, <a href=\"https://babeljs.io/\">Babel</a>\n\t\t\t\t\t\t, and a lot of <a href=\"https://webpack.js.org/\">Webpack</a> sorcery.\n\t\t\t\t\t\tThe few icons come\n\t\t\t\t\t\tfrom <a href=\"https://fontawesome.com/\">FontAwesome</a>&nbsp;\n\t\t\t\t\t\tor <a href=\"https://material.io/resources/icons/\">Material Design.</a>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThe source code is available\n\t\t\t\t\t\ton <a href=\"https://github.com/thesmartwon/openbible\">Github</a> and it's\n\t\t\t\t\t\tdeployed\n\t\t\t\t\t\tusing <a href=\"https://pages.github.com/\">Github Pages.</a>&nbsp;\n\t\t\t\t\t\tI welcome contributions, there's still a lot of work to be done!\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t</Fragment>\n\t)\n}","import { h, Fragment } from 'preact'\nimport { useEffect, useState } from 'preact/hooks'\nimport { Nav, Reader } from '../components'\nimport { useLocalStorage, cssVars } from '../utils'\nimport cssVariables from '!css-variables-loader!../app.css'\nimport styles from './settings.css'\nimport readerStyles from '../components/reader/reader.css'\n\nexport interface SettingsType {\n  selectVerseNums: string;\n  cssVars: {\n    [cssVar: string]: string;\n  }\n}\n\nexport const defaultSettings = {\n  selectVerseNums: 'noSelect',\n  cssVars: cssVariables\n} as SettingsType\n\nexport function Settings(_props: { path: String }) {\n  const [config, setConfig] = useLocalStorage('settings2', defaultSettings)\n\n  const setCSSVar = (cssVar: string, cssValue: string) => {\n    document.body.style.setProperty(cssVar, cssValue)\n    config.cssVars[cssVar] = cssValue\n    setConfig(Object.assign({}, config))\n  }\n\n  const onSettingInput = (key: string, val: string) => {\n    config[key as 'selectVerseNums'] = val\n    setConfig(Object.assign({}, config))\n  }\n\n  const onReset = (ev: h.JSX.TargetedEvent<HTMLFormElement, Event>) => {\n    ev.preventDefault()\n    cssVars.forEach(cssVar => {\n      const cssVal = getComputedStyle(document.documentElement)\n        .getPropertyValue(cssVar)\n        .trim()\n      setCSSVar(cssVar, cssVal)\n    })\n    setConfig({ ...config, ...defaultSettings })\n  }\n\n  const onSubmit = (ev: h.JSX.TargetedEvent<HTMLFormElement, Event>) => {\n    ev.preventDefault()\n    // TODO: web service\n    console.log('save settings')\n  }\n\n  return (\n    <Fragment>\n      <Nav />\n      <main>\n        <form class={styles.form} onSubmit={onSubmit} onReset={onReset}>\n          <h2>CSS Variables</h2>\n          {Object.entries(config.cssVars)\n            .map(entry => (\n              <p key={entry[0]}>\n                <label>{entry[0]}</label>\n                <input\n                  type={entry[0].includes('color') ? 'color' : ''}\n                  value={entry[1]}\n                  onInput={(ev: any) => setCSSVar(entry[0], ev.target.value)}\n                  />\n              </p>\n          ))}\n          <h2>Copy behavior</h2>\n          <p>\n            <label>Snap selection to words</label>\n            TODO: code no snapping but still snapping for highlighting\n          </p>\n          <p>\n            <label>Verse number selection</label>\n            <select\n              value={config.selectVerseNums}\n              onChange={(ev: any) => onSettingInput('selectVerseNums', ev.target.value)}\n            >\n              <option value=\"noSelect\">Don't select</option>\n              <option value=\"addSpace\">Add space</option>\n              <option value=\"default\">Browser default</option>\n            </select>\n          </p>\n          <input type=\"reset\" value=\"Reset settings\" />\n          <input type=\"submit\" value=\"Save settings\" />\n        </form>\n        <div class={`${readerStyles.reader} ${styles.testDiv}`}>\n          <Reader text=\"en_ult\" book=\"PSA\" chapter={119} />\n        </div>\n      </main>\n    </Fragment>\n  )\n}\n","export * from './home'\nexport * from './about'\nexport * from './settings'","import { h, render } from 'preact'\nimport { useEffect } from 'preact/hooks'\nimport Router from 'preact-router'\nimport { Home, About, Settings, SettingsType } from './pages'\nimport { useLocalStorage } from './utils'\nimport './app.css'\n\nfunction App() {\n  const config = useLocalStorage('settings2', { cssVars: {} })[0] as SettingsType\n\n\tuseEffect(() => {\n    // Leave document for default styles, document.body to load styles\n\t\tconst rootElement = document.body\n    Object.keys(config.cssVars)\n      .forEach(cssVar => rootElement.style.setProperty(cssVar, config.cssVars[cssVar]))\n\t}, []);\n\t\n\treturn (\n\t\t<Router>\n\t\t\t<Home path=\"/\" />\n\t\t\t<About path=\"/about\" />\n\t\t\t<Settings path=\"/settings\" />\n\t\t</Router>\n\t)\n}\n\nrender(\n\t<App />,\n\tdocument.getElementById('root') as HTMLElement\n)\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dragbar\":\"css-1qs_t\"};"],"sourceRoot":""}