{"version":3,"sources":["webpack:///./src/components/toolbar/colorpalette.css?c668","webpack:///./src/pages/settings.css?562f","webpack:///./src/components/paragraphs/verse.css?6815","webpack:///./src/components/toolbar/toolbar.css?4e74","webpack:///./src/components/nav/nav.css?9fd9","webpack:///./src/components/paragraphs/paragraph.css?795e","webpack:///./src/components/reader/reader.css?3da7","webpack:///./src/components/paragraphs/versenote.css?3b9b","webpack:///./src/components/nav/nav.tsx","webpack:///./src/utils/books.ts","webpack:///./src/utils/classnames.ts","webpack:///./src/utils/useLocalStorage.ts","webpack:///./src/utils/cssVars.ts","webpack:///./src/utils/visitParagraph.ts","webpack:///./src/utils/eventEmitter.ts","webpack:///./src/utils/index.ts","webpack:///./src/components/paragraphs/select.ts","webpack:///./src/components/paragraphs/versenotecontext.tsx","webpack:///./src/icons/md-edit.svg","webpack:///./src/components/paragraphs/versenote.tsx","webpack:///./src/components/paragraphs/verse.tsx","webpack:///./src/components/paragraphs/paragraph.tsx","webpack:///./src/components/paragraphs/paragraphs.tsx","webpack:///./src/components/reader/reader.tsx","webpack:///./src/components/readergroup/readergroup.tsx","webpack:///./src/icons/md-add-comment.svg","webpack:///./src/icons/md-format-bold.svg","webpack:///./src/icons/md-format-italic.svg","webpack:///./src/icons/md-format-underlined.svg","webpack:///./src/icons/md-undo.svg","webpack:///./src/icons/md-redo.svg","webpack:///./src/icons/md-format-text-color.svg","webpack:///./src/icons/md-format-highlight.svg","webpack:///./src/icons/index.ts","webpack:///./src/components/toolbar/colorpalette.tsx","webpack:///./src/components/toolbar/toolbar.tsx","webpack:///./src/components/index.ts","webpack:///./src/pages/home.tsx","webpack:///./src/pages/about.tsx","webpack:///./src/pages/settings.tsx","webpack:///./src/pages/index.ts","webpack:///./src/app.tsx","webpack:///./src/app.css?9ff3","webpack:///./src/components/readergroup/readergroup.css?03ea"],"names":["NavLink","props","Nav","styles","header","navbarGrow","navbar","navbarBrand","display","bugs","url","form","getChapterPath","version","book","chapter","padStart","cache","getChapter","path","Promise","resolve","reject","fetch","then","res","json","paragraphs","catch","books","name","chapters","texts","classnames","args","Array","prototype","slice","call","filter","Boolean","join","useLocalStorage","key","initialValue","useState","item","window","localStorage","getItem","JSON","parse","storedValue","setStoredValue","setValue","value","setItem","stringify","cssVars","loadLocalCSSVars","rootElement","document","body","forEach","cssVar","style","setProperty","visit","verse","visitor","parent","isArray","v","visitParagraphs","p","events","subscribe","event","listener","push","unsubscribe","i","length","splice","emit","listeners","selectedNodes","copyableTags","copyStyles","BODY","P","SPAN","snapToWords","range","setStart","startContainer","endContainer","setEnd","iterateOverRange","rangeFn","it","createNodeIterator","commonAncestorContainer","hitFirstNode","node","nextNode","getStyles","nodeStyles","getComputedStyle","nodeName","map","replace","getRange","selection","getSelection","rangeCount","undefined","getRangeAt","startOffset","endOffset","onSelectChange","parentNode","onDoubleClickVerseNumber","ev","console","log","preventDefault","onCopy","config","selectVerseNums","toCopy","toCopyHTML","addedFirstPara","includes","textContent","tag","toLowerCase","clipboardData","setData","NoteContext","createContext","onNoteSubmit","_note","onNoteRemove","VerseNote","textAreaRef","useRef","note","isFormOpen","setFormOpen","isNoteOpen","setNoteOpen","useEffect","current","focus","onSubmit","onInput","target","onOpenForm","_ev","isOpen","toggleNoteOpen","marginClass","getParagraphClass","paragraphStyles","q","inMargin","sup","textareaContainer","textarea","lastVerse","startPunct","endPunct","suffixes","isNoted","noted","Verse","highlight","background","prependSpace","t","n","test","id","paragraph","qcol","Paragraph","className","Paragraphs","clearSelection","removeAllRanges","Reader","GEN","text","Object","keys","setParagraphs","highlights","setHighlights","notes","setNotes","defaultSettings","divRef","color","toId","savedNote","fromId","onAddNote","onAddHighlight","onNavChange","scrollTop","onBookChange","onChapterChange","onTextChange","getSelectedNodes","ids","contains","getAttribute","selected","assign","article","navContainer","entries","val","apply","_el","onAddReader","windowButton","onCloseReader","reader","ReaderGroup","width","readers","setReaders","preMoveMouseWidths","initialPageX","updateReaders","onMouseMove","index","offsetXPercent","pageX","innerWidth","mouseMoveHandler","r","handler","addEventListener","removeEventListener","nextReader","Math","min","newReader","lastWidth","onReaderChange","dragbar","e","ColorPalette","paletteRows","table","row","swatch","onSelect","Toolbar","textColor","setTextColor","highlightColor","setHighlightColor","isTextColorPaletteOpen","setTextColorPaletteOpen","isHighlightPaletteOpen","setHighlightPaletteOpen","onToggleTextPaletteOpen","open","onToggleHighlightPaletteOpen","toolbar","button","fill","tooltip","borderBottom","Home","_props","About","Settings","cssValues","setCSSValues","setConfig","docStyles","docCSSVars","reduce","acc","cur","getPropertyValue","trim","onSetCSSVar","cssValue","onSettingInput","onReset","cssVal","documentElement","entry","readerStyles","testDiv","App","render","getElementById"],"mappings":"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","file":"main.acb482b9.bundle.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"css-bWeIp\",\"swatch\":\"css-18NVn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"testDiv\":\"css-3qFxd\",\"form\":\"css-QY6n6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sup\":\"css-3Jtiz\",\"d\":\"css-1o5Cy\",\"noted\":\"css-Nyajp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"css-Hw5M8\",\"button\":\"css-XxCF7\",\"tooltip\":\"css-39Fw0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"css-G-H7T\",\"navbar\":\"css-2cu9j\",\"navbarGrow\":\"css-sOHx1\",\"navbarBrand\":\"css-3__Qk\",\"form\":\"css-2Cez1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"p\":\"css-k-P1n\",\"q\":\"css-2KJWD\",\"qcol\":\"css-1HONz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"article\":\"css-3ph2U\",\"reader\":\"css-JUyX7\",\"navContainer\":\"css-1FFzU\",\"windowButton\":\"css-HDosR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sup\":\"css-1Kifr\",\"textarea\":\"css-aYW0c\",\"textareaContainer\":\"css-YTfSd\",\"note\":\"css-1IwTc\",\"inMargin\":\"css-3GW0v\"};","import { h } from 'preact'\nimport { Link, LinkProps } from 'preact-router/match';\nimport styles from './nav.css'\nimport { bugs } from '../../../package.json';\n\nconst NavLink = (props: Omit<LinkProps, 'activeClassName'>) => (\n\t<Link activeClassName=\"\" {...props} />\n)\n\nexport function Nav() {\n\treturn (\n\t\t<header class={styles.header}>\n\t\t\t<nav class={styles.navbarGrow}>\n\t\t\t\t<ul class={styles.navbar}>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<h1>\n\t\t\t\t\t\t\t<NavLink class={styles.navbarBrand} href=\"/\">\n\t\t\t\t\t\t\t\tOpen Bible\n\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</nav>\n\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t<ul class={styles.navbar}>\n\t\t\t\t\t<li><NavLink href=\"/about\">About</NavLink></li>\n\t\t\t\t\t<li><NavLink href=\"/settings\">Settings</NavLink></li>\n\t\t\t\t\t<li><a target=\"_blank\" href={bugs.url}>Report an issue</a></li>\n\t\t\t\t</ul>\n\t\t\t\t<form class={styles.form}>\n\t\t\t\t\t<input placeholder=\"Search\"></input>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</header>\n\t)\n}\n","export function getChapterPath(\n  version: string,\n  book: string,\n  chapter: number\n) {\n\treturn `./static/${version}/${book}-${(chapter + '').padStart(2, '0')}.json`\n}\n\n// TODO: types\nconst cache = {} as { [key: string]: ParagraphType[] }\n\nexport interface NoteType {\n  note: string;\n  // Need these to pass back up on note submit\n  toId: number;\n  fromId: number;\n  isFormOpen: boolean;\n}\n\nexport interface VerseType {\n  t: string;\n  c?: string;\n  n?: number;\n  v?: string | VerseType[];\n  id: number;\n  // Added by frontend\n  parent?: ParagraphType;\n  highlight?: string;\n  noted?: number | null;\n  note?: NoteType;\n}\n\nexport interface ParagraphType {\n  t: string;\n  v: VerseType[]\n  id: number;\n}\n\nexport function getChapter(\n  version: string,\n  book: string,\n  chapter: number\n): Promise<ParagraphType[]> {\n  const path = getChapterPath(version, book, chapter)\n  if (!cache[path]) {\n    return new Promise((resolve, reject) => {\n      fetch(path)\n        .then(res => res.json())\n        .then(paragraphs => {\n          resolve(paragraphs)\n          cache[path] = paragraphs\n        })\n        .catch(reject)\n    })\n  }\n\treturn new Promise(resolve => resolve(cache[path]))\n}\n\nexport const books = {\n\t'GEN': {\n    name: 'Genesis',\n    chapters: 50\n  },\n\t'EXO': {\n    name: 'Exodus',\n    chapters: 40\n  },\n\t'LEV': {\n    name: 'Leviticus',\n    chapters: 27\n  },\n\t'NUM': {\n    name: 'Numbers',\n    chapters: 36\n  },\n\t'DEU': {\n    name: 'Deuteronomy',\n    chapters: 34\n  },\n\t'JOS': {\n    name: 'Joshua',\n    chapters: 24\n  },\n\t'JDG': {\n    name: 'Judges',\n    chapters: 21\n  },\n\t'RUT': {\n    name: 'Ruth',\n    chapters: 4\n  },\n\t'1SA': {\n    name: '1 Samuel',\n    chapters: 31\n  },\n\t'2SA': {\n    name: '2 Samuel',\n    chapters: 24\n  },\n\t'1KI': {\n    name: '1 Kings',\n    chapters: 22\n  },\n\t'2KI': {\n    name: '2 Kings',\n    chapters: 25\n  },\n\t'1CH': {\n    name: '1 Chronicles',\n    chapters: 29\n  },\n\t'2CH': {\n    name: '2 Chronicles',\n    chapters: 36\n  },\n\t'EZR': {\n    name: 'Ezra',\n    chapters: 10\n  },\n\t'NEH': {\n    name: 'Nehamiah',\n    chapters: 13\n  },\n\t'EST': {\n    name: 'Esther',\n    chapters: 10\n  },\n\t'JOB': {\n    name: 'Job',\n    chapters: 42\n  },\n\t'PSA': {\n    name: 'Psalm',\n    chapters: 150\n  },\n\t'PRO': {\n    name: 'Proverbs',\n    chapters: 31\n  },\n\t'ECC': {\n    name: 'Ecclessiates',\n    chapters: 12\n  },\n\t'SNG': {\n    name: 'Song of Solomon',\n    chapters: 8\n  },\n\t'ISA': {\n    name: 'Isiah',\n    chapters: 66\n  },\n\t'JER': {\n    name: 'Jeremiah',\n    chapters: 52\n  },\n\t'LAM': {\n    name: 'Lamentations',\n    chapters: 5\n  },\n\t'EZK': {\n    name: 'Ezekiel',\n    chapters: 48\n  },\n\t'DAN': {\n    name: 'Daniel',\n    chapters: 12\n  },\n\t'HOS': {\n    name: 'Hosea',\n    chapters: 14\n  },\n\t'JOL': {\n    name: 'Joel',\n    chapters: 3\n  },\n\t'AMO': {\n    name: 'Amos',\n    chapters: 9\n  },\n\t'OBA': {\n    name: 'Obadiah',\n    chapters: 1\n  },\n\t'JON': {\n    name: 'Jonah',\n    chapters: 4\n  },\n\t'MIC': {\n    name: 'Micah',\n    chapters: 7\n  },\n\t'NAM': {\n    name: 'Nahum',\n    chapters: 3\n  },\n\t'HAB': {\n    name: 'Habakkuk',\n    chapters: 3\n  },\n\t'ZEP': {\n    name: 'Zephaniah',\n    chapters: 3\n  },\n\t'HAG': {\n    name: 'Haggai',\n    chapters: 2\n  },\n\t'ZEC': {\n    name: 'Zechariah',\n    chapters: 14\n  },\n\t'MAL': {\n    name: 'Malachi',\n    chapters: 4\n  },\n\t'MAT': {\n    name: 'Matthew',\n    chapters: 28\n  },\n\t'MRK': {\n    name: 'Mark',\n    chapters: 16\n  },\n\t'LUK': {\n    name: 'Luke',\n    chapters: 24\n  },\n\t'JHN': {\n    name: 'John',\n    chapters: 21\n  },\n\t'ACT': {\n    name: 'Acts',\n    chapters: 28\n  },\n\t'ROM': {\n    name: 'Romans',\n    chapters: 16\n  },\n\t'1CO': {\n    name: '1 Corinthians',\n    chapters: 16\n  },\n\t'2CO': {\n    name: '2 Corinthians',\n    chapters: 13\n  },\n\t'GAL': {\n    name: 'Galatians',\n    chapters: 6\n  },\n\t'EPH': {\n    name: 'Ephesians',\n    chapters: 6\n  },\n\t'PHP': {\n    name: 'Philippians',\n    chapters: 4\n  },\n\t'COL': {\n    name: 'Colossians',\n    chapters: 4\n  },\n\t'1TH': {\n    name: '1 Thessalonians',\n    chapters: 5\n  },\n\t'2TH': {\n    name: '2 Thessalonians',\n    chapters: 3\n  },\n\t'1TI': {\n    name: '1 Timothy',\n    chapters: 6\n  },\n\t'2TI': {\n    name: '2 Timothy',\n    chapters: 4\n  },\n\t'TIT': {\n    name: 'Titus',\n    chapters: 3\n  },\n\t'PHM': {\n    name: 'Philemon',\n    chapters: 1\n  },\n\t'HEB': {\n    name: 'Hebrews',\n    chapters: 13\n  },\n\t'JAS': {\n    name: 'James',\n    chapters: 5\n  },\n\t'1PE': {\n    name: '1 Peter',\n    chapters: 5\n  },\n\t'2PE': {\n    name: '2 Peter',\n    chapters: 3\n  },\n\t'1JN': {\n    name: '1 John',\n    chapters: 5\n  },\n\t'2JN': {\n    name: '2 John',\n    chapters: 1\n  },\n\t'3JN': {\n    name: '3 John',\n    chapters: 1\n  },\n\t'JUD': {\n    name: 'Jude',\n    chapters: 1\n  },\n\t'REV': {\n    name: 'Revelation',\n    chapters: 22\n  },\n}\n\nexport const texts = {\n  'en_ult': 'unfoldingWord® Literal Text',\n  'en_ust': 'unfoldingWord® Simplified Text',\n}\n\nexport type BookNames = keyof typeof books\n","export function classnames(...args: (string | boolean | null | undefined)[]): string {\n\treturn Array.prototype.slice.call(args).filter(Boolean).join(' ')\n}\n","import { useState, StateUpdater } from 'preact/hooks'\n\nexport function useLocalStorage<S>(key: string, initialValue: S): [S, StateUpdater<S>] {\n  const [storedValue, setStoredValue] = useState(() => {\n    const item = window.localStorage.getItem(key);\n    return item ? JSON.parse(item) : initialValue;\n  });\n\tconst setValue = (value: any) => {\n    setStoredValue(value);\n    window.localStorage.setItem(key, JSON.stringify(value));\n  };\n\n  return [storedValue, setValue];\n}\n","// TODO: use custom loader on ../app.css\nexport const cssVars = [\n  '--primary-text-color',\n  '--primary-text-indent',\n  '--primary-theme-color',\n  '--primary-font-family',\n]\n\nexport function loadLocalCSSVars() {\n  const rootElement = document.body\n  cssVars.forEach(cssVar => {\n    rootElement.style.setProperty(cssVar, localStorage.getItem(`css-${cssVar}`))\n  })\n}\n","import { ParagraphType, VerseType } from \".\"\n\ntype Visitor = (verse: VerseType, parent?: ParagraphType) => void\n\nconst visit = (\n\tverse: ParagraphType | VerseType,\n\tvisitor: Visitor,\n\tparent?: ParagraphType\n) => {\n\tvisitor(verse, parent)\n\tif (Array.isArray(verse.v)) {\n\t\t(verse as ParagraphType).v.forEach(v => visit(v, visitor, verse as ParagraphType))\n\t}\n}\n\nexport const visitParagraphs = (\n\tparagraphs: ParagraphType[] | undefined,\n\tvisitor:Visitor\n) => {\n\tif (!paragraphs) {\n\t\treturn\n\t}\n\tparagraphs.forEach(p => visit(p, visitor))\n}","type Listener = (...args: any) => void\n\nconst events = { } as { [key: string]: Listener[] }\n\nexport function subscribe(event: string, listener: Listener) {\n\tevents[event] = events[event] || []\n\n\tevents[event].push(listener)\n}\n\nexport function unsubscribe(event: string, listener: Listener) {\n\tfor (let i = 0; i < events[event].length; i++) {\n\t\tif (events[event][i] === listener) {\n\t\t\tevents[event].splice(i, 1)\n\t\t}\n\t}\n}\n\nexport function emit(event: string, ...args: any) {\n\tconst listeners = events[event] || []\n\tlisteners.forEach(listener => listener(...args))\n}\n","export * from './books'\nexport * from './classnames'\nexport * from './useLocalStorage'\nexport * from './cssVars'\nexport * from './visitParagraph'\nexport * from './eventEmitter'","import { SettingsType } from \"../../pages\"\n\n// Handles selecting anywhere in <article> of <Reader>\nexport const selectedNodes: Node[] = []\nconst copyableTags = ['SPAN', 'U']\nconst copyStyles = {\n\tBODY: [\n\t\t'color',\n\t\t'background-color',\n\t\t'font-family',\n\t\t'font-size',\n\t],\n\tP: [\n\t\t'padding-left',\n\t\t'margin',\n\t\t'text-indent',\n\t],\n\tSPAN: [\n\t\t'color',\n\t\t'background-color',\n\t\t'text-decoration',\n\t],\n}\n\nfunction snapToWords(range: Range) {\n\trange.setStart(range.startContainer, 0)\n\tconst length = (range.endContainer as Text).length\n\tif (length) {\n\t\trange.setEnd(range.endContainer, length)\n\t}\n}\n\n// Select API doesn't yet allow selecting multiple ranges\n// Just traverse selected Range and add a class to tags\nfunction iterateOverRange(range: Range, rangeFn: (node: Node) => void) {\n\tconst it = document.createNodeIterator(range.commonAncestorContainer)\n\tlet hitFirstNode = false\n\tlet node: Node\n\twhile (node = it.nextNode() as Node) {\n\t\tif (!hitFirstNode && node === range.startContainer) {\n\t\t\thitFirstNode = true\n\t\t} else if (!hitFirstNode || !node) {\n\t\t\tcontinue\n\t\t}\n\n\t\trangeFn(node)\n\n\t\tif (node === range.endContainer) {\n\t\t\tbreak\n\t\t}\n\t}\n}\n\nfunction getStyles(node: Node) {\n\tconst nodeStyles = getComputedStyle(node as Element)\n\n\treturn (copyStyles[node.nodeName as keyof typeof copyStyles] || [])\n\t\t.filter(style => nodeStyles[style as any])\n\t\t.map(style => `${style}: ${nodeStyles[style as any].replace(/\"/g, '')};`)\n\t\t.join(' ')\n}\n\nexport function getRange() {\n\tconst selection = window.getSelection()\n\tif (!selection || selection.rangeCount === 0) {\n\t\treturn undefined\n\t}\n\tconst range = selection.getRangeAt(0) as Range\n\tif (range.startContainer === range.endContainer &&\n\t\t\trange.startOffset === range.endOffset) {\n\t\treturn undefined\n\t}\n\n\treturn range\n}\n\nexport function onSelectChange() {\n\tconst range = getRange()\n\tif (!range) {\n\t\treturn\n\t}\n\n\tsnapToWords(range)\n\t// Unselect all previously selected nodes\n\tselectedNodes.length = 0\n\t\n\titerateOverRange(range, node => {\n\t\tif (node.nodeName === '#text') {\n\t\t\tselectedNodes.push(node.parentNode as Node)\n\t\t}\n\t})\n}\n\n// TODO\nexport function onDoubleClickVerseNumber(ev: any) {\n\tconsole.log('TODO: select verse', ev)\n  ev.preventDefault()\n}\n\nexport function onCopy(ev: any, config: SettingsType) {\n\tconst range = getRange()\n\tif (!range || config.selectVerseNums === 'default') {\n\t\treturn\n\t}\n\tlet toCopy = ''\n\tlet toCopyHTML = `<html>\n<head>\n\t<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n</head>\n<body style=\"${getStyles(document.body)}\">\n\t<meta charset=\"utf-8\">`\n\tlet addedFirstPara = false\n\titerateOverRange(range, node => {\n\t\tconst parentNode = node.parentNode as Node\n\t\tif (node.nodeName === '#text'\n\t\t\t\t&& copyableTags.includes(parentNode.nodeName)) {\n\t\t\ttoCopy += node.textContent\n\t\t\tif (!addedFirstPara) {\n\t\t\t\ttoCopyHTML += `<p style=\"${getStyles(parentNode.parentNode as Node)}\">`\n\t\t\t\taddedFirstPara = true\n\t\t\t}\n\t\t\tconst tag = parentNode.nodeName.toLowerCase()\n\t\t\ttoCopyHTML += `<${tag} style=\"${getStyles(parentNode)}\">${node.textContent}</${tag}>`\n\t\t}\n\t\telse if (node.nodeName === 'P') {\n\t\t\ttoCopy += '\\n'\n\t\t\ttoCopyHTML += `</p><p style=\"${getStyles(node)}\">`\n\t\t}\n\t\telse if (node.nodeName === 'SUP') {\n\t\t\ttoCopy += ' '\n\t\t\ttoCopyHTML += ' '\n\t\t}\n\t})\n\ttoCopyHTML += '</p></body></html>'\n\tev.clipboardData.setData('text/html', toCopyHTML)\n\tev.clipboardData.setData('text/plain', toCopy)\n\tev.preventDefault()\n}\n","import { createContext } from 'preact'\nimport { NoteType } from '../../utils'\n\ninterface NoteContextType {\n  onNoteSubmit: (note: NoteType) => void;\n  onNoteRemove: (note: NoteType) => void;\n}\n\nexport const NoteContext = createContext({\n  onNoteSubmit: (_note: NoteType) => {},\n  onNoteRemove: (_note: NoteType) => {},\n} as NoteContextType)\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"}, []), \"\\n\"]);\n};\n\n        ","import { h, Fragment } from 'preact'\nimport { useState, useEffect, useRef } from 'preact/hooks'\nimport styles from './versenote.css'\nimport { NoteContext } from './versenotecontext'\nimport { NoteType, VerseType, classnames } from '../../utils'\nimport EditIcon from '../../icons/md-edit.svg'\nimport paragraphStyles from '../paragraphs/paragraph.css'\nimport { getParagraphClass } from './paragraph'\n\ninterface VerseNoteProps {\n  verse: VerseType;\n}\n\nexport function VerseNote(props: VerseNoteProps) {\n  const textAreaRef = useRef<HTMLTextAreaElement>()\n  const note = props.verse.note as NoteType\n  const [isFormOpen, setFormOpen] = useState(note.isFormOpen)\n  const [isNoteOpen, setNoteOpen] = useState(false)\n\n  useEffect(() => {\n    if (note.isFormOpen && textAreaRef.current) {\n      textAreaRef.current.focus()\n    }\n  }, [])\n\n  const onSubmit = (ev: any, onNoteSubmit: (note: NoteType) => void) => {\n    ev.preventDefault()\n    \n    onNoteSubmit(note)\n    setFormOpen(false)\n    setNoteOpen(true)\n  }\n\n  const onInput = (ev: any) => {\n    note.note = ev.target.value\n  }\n\n  const onOpenForm = (_ev: any) => {\n    if (textAreaRef.current) {\n      textAreaRef.current.focus()\n    }\n\n    setFormOpen(isOpen => !isOpen)\n    setNoteOpen(false)\n  }\n\n  const toggleNoteOpen = (_ev: any) => {\n    if (!isFormOpen) {\n      setNoteOpen(isOpen => !isOpen)\n    } else {\n      setFormOpen(false)\n    }\n  }\n\n  const marginClass = getParagraphClass(props.verse.parent) === paragraphStyles.q\n    ? styles.inMargin\n    : ''\n\n  return (\n    <Fragment>\n      <sup\n        class={styles.sup}\n        onClick={toggleNoteOpen}\n      >\n        N\n      </sup>\n      {isFormOpen && (\n        <NoteContext.Consumer>\n          {({ onNoteSubmit, onNoteRemove }) => (\n            <form\n              onSubmit={(ev: any) => onSubmit(ev, onNoteSubmit)}\n              onReset={(_ev: any) => onNoteRemove(note)}\n              class={marginClass}\n            >\n              <div class={styles.textareaContainer}>\n                <textarea\n                  name=\"note\"\n                  class={styles.textarea}\n                  onInput={onInput}\n                  value={note.note}\n                  placeholder=\"Add note\"\n                  ref={textAreaRef}\n                />\n              </div>\n              <input type=\"reset\" value=\"Remove\" />\n              <input type=\"submit\" value=\"Submit\" />\n            </form>\n          )}\n        </NoteContext.Consumer>\n      )}\n      {isNoteOpen && (\n        <div class={classnames(styles.note, marginClass)}>\n          {note.note}\n          <button class={styles.sup} onClick={onOpenForm}>\n            <EditIcon width=\"12px\" />\n          </button>\n        </div>\n      )}\n    </Fragment>\n  )\n}\n","import { h, Fragment } from 'preact'\nimport { classnames } from '../../utils/classnames'\nimport { onDoubleClickVerseNumber } from './select'\nimport styles from './verse.css'\nimport highlightStyles from './highlights.css'\nimport { VerseType } from '../../utils/books'\nimport { VerseNote } from './versenote'\n\nlet lastVerse: VerseType\nconst startPunct = /['\"“‘\\[\\(\\-]/\nconst endPunct = /['\".”’,?!:;\\]\\)\\-]/\nconst suffixes = [\n  's', // Possesion like \"Pharaoh’s\"\n  'th', // Number like \"480th year\"\n]\n\ninterface VerseProps {\n  verse: VerseType;\n}\n\nconst isNoted = (verse: VerseType) => Boolean(verse.noted) || verse.noted === 0\n\nexport function Verse(props: VerseProps) {\n  const verse = props.verse\n  const style = verse.highlight\n    ? { background: verse.highlight } as { background: string }\n    : {}\n  let prependSpace = verse.t === 'w' || verse.t === 't' \n  if (lastVerse && (\n        lastVerse.n\n        || startPunct.test(lastVerse.v as string)\n        || endPunct.test(verse.v as string)\n        || suffixes.includes(verse.v as string)\n    )) {\n    prependSpace = false\n  }\n  const res = (\n    <Fragment>\n      {prependSpace &&\n        <span\n          class={classnames(\n            lastVerse && isNoted(lastVerse) && isNoted(verse) && styles.noted\n          )}\n          style={style}\n        >\n          {' '}\n        </span>\n      }\n      {verse.n &&\n        <sup\n          onDblClick={onDoubleClickVerseNumber}\n          class={classnames(\n            styles.sup,\n          )}\n          style={style}\n        >\n          {verse.n}\n        </sup>\n      }\n      {verse.v &&\n        <span\n          data-id={verse.id}\n          class={classnames(\n            styles[verse.t],\n            isNoted(verse) && styles.noted\n          )}\n          style={style}\n        >\n          {verse.v}\n        </span>\n      }\n      {verse.note &&\n        <VerseNote verse={verse} />\n      }\n    </Fragment>\n  )\n  lastVerse = verse\n  return res\n}\n","import { h, Fragment } from 'preact'\nimport { ParagraphType, VerseType } from '../../utils/books'\nimport { Paragraphs } from './paragraphs'\nimport { Verse } from './verse'\nimport styles from './paragraph.css'\n\nexport function getParagraphClass(paragraph?: ParagraphType) {\n  if (!paragraph) {\n    return ''\n  }\n  else if (paragraph.t === 'q' && paragraph.v[0].t === 'v') {\n    return styles.qcol\n  }\n\n  return styles[paragraph.t]\n}\n\ninterface ParagraphProps {\n  paragraph: ParagraphType | VerseType;\n}\n\nexport function Paragraph(props: ParagraphProps) {\n  const paragraph = props.paragraph\n\n  if (Array.isArray(paragraph.v)) {\n    const className = getParagraphClass(paragraph as ParagraphType)\n    return (\n      <p data-id={paragraph.id} class={className}>\n        <Paragraphs paragraphs={paragraph.v} />\n      </p>\n    )\n  }\n\n  return <Verse verse={paragraph} />\n}\n","import { h, Fragment } from 'preact'\nimport { Paragraph } from './paragraph'\nimport { ParagraphType, VerseType } from '../../utils/books'\n\ninterface ParagraphsProps {\n  paragraphs?: (ParagraphType | VerseType)[];\n}\n\nexport function Paragraphs(props: ParagraphsProps) {\n  if (!props.paragraphs) {\n    return <div>Loading</div>\n  }\n  return (\n    <Fragment>\n      {props.paragraphs.map(p =>\n        <Paragraph paragraph={p} />\n      )}\n    </Fragment>\n  )\n}\n","import { h } from 'preact'\nimport { useState, useRef, useEffect } from 'preact/hooks'\nimport { getChapter, books, texts, BookNames, useLocalStorage, subscribe, visitParagraphs } from '../../utils'\nimport { ParagraphType, NoteType } from '../../utils/books'\nimport { Highlight, Highlights } from '../../types/highlights'\nimport { onSelectChange, onCopy, selectedNodes, getRange } from '../paragraphs/select'\nimport { NoteContext } from '../paragraphs/versenotecontext'\nimport { Paragraphs } from '../paragraphs/paragraphs'\nimport { Notes } from '../../types/notes'\nimport styles from './reader.css'\nimport { defaultSettings } from '../../pages'\n// import { onAddNote } from '../../actions/onAddNote'\n\nconst clearSelection = () => {\n\tconst selection = document.getSelection()\n\tif (selection) {\n\t\tselection.removeAllRanges()\n\t}\n}\n\nexport interface ReaderProps {\n\ttext: string;\n\tbook: BookNames;\n\tchapter: number;\n\t// TODO: how to copy JSXInternal.HTMLAttributes<HTMLElement>.style?: string | {\n\tstyle?: { [key: string]: string | number } | string;\n\tonAddReader?: () => void;\n\tonCloseReader?: () => void;\n\tonNavChange?: (text: string, book: BookNames, chapter: number) => void\n}\n\nexport function Reader(props = {\n\tbook: books.GEN.name,\n\tchapter: 1,\n\ttext: Object.keys(texts)[0]\n} as ReaderProps) {\n\tconst [paragraphs, setParagraphs] = useState([] as ParagraphType[])\n\tconst [highlights, setHighlights] = useLocalStorage(`highlight1-${props.book}-${props.chapter}`, {} as Highlights);\n\tconst [notes, setNotes] = useLocalStorage(`note1-${props.book}-${props.chapter}`, {} as Notes);\n  const [config,] = useLocalStorage('settings', defaultSettings);\n\tconst divRef = useRef<HTMLDivElement>()\n\n\tuseEffect(() => {\n\t\tgetChapter(props.text, props.book, props.chapter)\n\t\t\t.then(paragraphs => {\n\t\t\t\tlet highlight: Highlight | undefined\n\t\t\t\tlet note: NoteType | undefined\n\t\t\t\tvisitParagraphs(paragraphs, (verse, parent) => {\n\t\t\t\t\tverse.parent = parent\n\t\t\t\t\tif (!highlight) {\n\t\t\t\t\t\thighlight = highlights[verse.id]\n\t\t\t\t\t}\n\t\t\t\t\tif (highlight) {\n\t\t\t\t\t\tverse.highlight = highlight.color\n\t\t\t\t\t\tif (verse.id >= highlight.toId) {\n\t\t\t\t\t\t\thighlight = undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst savedNote = notes[verse.id]\n\t\t\t\t\tif (!note && savedNote) {\n\t\t\t\t\t\tnote = {\n\t\t\t\t\t\t\tfromId: verse.id,\n\t\t\t\t\t\t\ttoId: savedNote.toId,\n\t\t\t\t\t\t\tnote: savedNote.note,\n\t\t\t\t\t\t\tisFormOpen: false,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (note) {\n\t\t\t\t\t\tverse.noted = verse.id\n\t\t\t\t\t\tif (verse.id >= note.toId) {\n\t\t\t\t\t\t\tverse.note = note\n\t\t\t\t\t\t\tnote = undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tsetParagraphs(paragraphs)\n\t\t\t\tsubscribe('ADD_NOTE', () => onAddNote(paragraphs))\n\t\t\t\tsubscribe('ADD_HIGHLIGHT', (color: string) => onAddHighlight(paragraphs, color))\n\t\t\t})\n\t}, [])\n\n\tconst onNavChange = (text: string, book: BookNames, chapter: number) => {\n\t\tgetChapter(text, book, chapter)\n\t\t\t.then(paragraphs => {\n\t\t\t\tsetParagraphs(paragraphs)\n\t\t\t\tif (divRef.current) {\n\t\t\t\t\tdivRef.current.scrollTop = 0\n\t\t\t\t}\n\t\t\t})\n\t\tif (props.onNavChange) {\n\t\t\tprops.onNavChange(text, book, chapter)\n\t\t}\n\t}\n\n\tconst onBookChange = (ev: any) => {\n\t\tconst book = ev.target.value as BookNames\n\t\tlet chapter = props.chapter\n\t\tif (chapter > books[book].chapters)\n\t\t\tchapter = books[book].chapters\n\t\tonNavChange(props.text, book, chapter)\n\t}\n\n\tconst onChapterChange = (ev: any) => {\n\t\tonNavChange(props.text, props.book, ev.target.value)\n\t}\n\n\tconst onTextChange = (ev: any) => {\n\t\tonNavChange(ev.target.value, props.book, props.chapter)\n\t}\n\n\tconst getSelectedNodes = () => {\n\t\tif (!getRange()) {\n\t\t\treturn\n\t\t}\n\t\tconst ids = selectedNodes\n\t\t\t.filter(node => divRef.current && divRef.current.contains(node))\n\t\t\t.map(node => (node as Element).getAttribute('data-id'))\n\t\t\t.filter(Boolean)\n\t\tif (ids.length > 0) {\n\t\t\treturn {\n\t\t\t\tfromId: +(ids as string[])[0],\n\t\t\t\ttoId: +(ids as string[])[ids.length - 1]\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onAddNote = (paragraphs: ParagraphType[]) => {\n\t\tconst selected = getSelectedNodes()\n\t\tif (selected && selected.fromId && selected.toId) {\n\t\t\tconst fromId = selected.fromId\n\t\t\tconst toId = selected.toId\n\t\t\tvisitParagraphs(paragraphs, v => {\n\t\t\t\tif (v.id >= fromId && v.id <= toId) {\n\t\t\t\t\tv.noted = selected.fromId\n\t\t\t\t}\n\t\t\t\tif (v.id === toId) {\n\t\t\t\t\tv.note = { fromId, toId, note: '', isFormOpen: true }\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tclearSelection()\n\t\t\tsetParagraphs(Object.assign([], paragraphs))\n\t\t}\n\t}\n\n\tconst onAddHighlight = (paragraphs: ParagraphType[], color: string) => {\n\t\tconst selected = getSelectedNodes()\n\t\tif (!selected) {\n\t\t\treturn\n\t\t}\n\n\t\tif (selected.fromId && selected.toId) {\n\t\t\tconst fromId = selected.fromId\n\t\t\tconst toId = selected.toId\n\t\t\tvisitParagraphs(paragraphs, verse => {\n\t\t\t\tif (verse.id >= fromId && verse.id <= toId) {\n\t\t\t\t\tverse.highlight = color\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tclearSelection()\n\t\t\thighlights[fromId] = { toId: toId, color }\n\t\t\tsetHighlights(Object.assign({}, highlights))\n\t\t\tsetParagraphs(Object.assign([], paragraphs))\n\t\t}\n\t}\n\n\tconst onNoteSubmit = (note: NoteType) => {\n\t\tnotes[note.fromId] = { toId: note.toId, note: note.note }\n\t\tsetNotes(Object.assign({}, notes))\n\t\tsetParagraphs(Object.assign([], paragraphs))\n\t}\n\n\tconst onNoteRemove = (note: NoteType) => {\n\t\tconst fromId = note.fromId\n\t\tconst toId = note.toId\n\t\tvisitParagraphs(paragraphs, v => {\n\t\t\tif (v.id >= fromId && v.id <= toId) {\n\t\t\t\tdelete v.noted\n\t\t\t}\n\t\t\tif (v.id === toId) {\n\t\t\t\tdelete v.note\n\t\t\t}\n\t\t})\n\t\tsetParagraphs(Object.assign([], paragraphs))\n\t}\n\n\tconst style = props.style || {}\n\treturn (\n\t\t<article class={styles.article} style={style}>\n\t\t\t<div class={styles.navContainer}>\n\t\t\t\t<nav>\n\t\t\t\t\t<select name=\"book\" value={props.book} onChange={onBookChange}>\n\t\t\t\t\t\t{Object.entries(books).map(([key, val]) =>\n\t\t\t\t\t\t\t<option value={key} key={key}>{val.name}</option>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</select>\n\t\t\t\t\t<select name=\"chapter\" value={props.chapter} onChange={onChapterChange}>\n\t\t\t\t\t\t{Array.apply(null, Array(books[props.book].chapters))\n\t\t\t\t\t\t\t.map((_el: unknown, i: number) =>\n\t\t\t\t\t\t\t\t<option value={i + 1} key={i}>{i + 1}</option>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</select>\n\t\t\t\t\t<select name=\"text\" value={props.text} onChange={onTextChange}>\n\t\t\t\t\t\t{Object.entries(texts).map(([key, val]) => \n\t\t\t\t\t\t\t<option value={key} key={key}>{key}</option>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</select>\n\t\t\t\t</nav>\n\t\t\t\t<div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={props.onAddReader}\n\t\t\t\t\t\tclass={styles.windowButton}\n\t\t\t\t\t>\n\t\t\t\t\t\t+\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={props.onCloseReader}\n\t\t\t\t\t\tclass={styles.windowButton}\n\t\t\t\t\t>\n\t\t\t\t\t\tx\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tref={divRef}\n\t\t\t\tonMouseUp={onSelectChange}\n\t\t\t\tonKeyUp={onSelectChange}\n\t\t\t\tclass={styles.reader}\n\t\t\t\tonCopy={(ev: any) => onCopy(ev, config)}\n\t\t\t\ttabIndex={0}\n\t\t\t>\n\t\t\t\t<NoteContext.Provider value={{ onNoteSubmit, onNoteRemove }}>\n\t\t\t\t\t<Paragraphs\tparagraphs={paragraphs} />\n\t\t\t\t</NoteContext.Provider>\n\t\t\t</div>\n\t\t</article>\n\t)\n}\n","import { h, Fragment } from 'preact'\nimport { Reader, ReaderProps } from '../reader/reader'\nimport { BookNames, useLocalStorage } from '../../utils'\nimport styles from './readergroup.css'\n\ninterface ReaderState extends ReaderProps {\n\twidth: number;\n}\n\n/*\n * Contains many <Reader>s and handles resizing them\n */\nexport function ReaderGroup() {\n\tconst [readers, setReaders] = useLocalStorage('readers', [\n\t\t{ text: 'en_ult', book: 'LUK' as BookNames, chapter: 4, width: 50 },\n\t\t{ text: 'en_ult', book: 'PSA' as BookNames, chapter: 119, width: 50 },\n\t] as ReaderState[])\n\tlet preMoveMouseWidths: number[] = []\n\tlet initialPageX = 0\n\n\n\tconst updateReaders = () => {\n\t\tsetReaders(Object.assign([], readers))\n\t}\n\n\tconst onMouseMove = (ev: any, index: number) => {\n\t\tev.preventDefault()\n\t\tconst offsetXPercent = (ev.pageX - initialPageX) / window.innerWidth\n\t\treaders.forEach((reader, i) => {\n\t\t\tif (i === index)\n\t\t\t\treader.width = preMoveMouseWidths[i] + offsetXPercent\n\t\t\telse if (i === index + 1)\n\t\t\t\treader.width = preMoveMouseWidths[i] - offsetXPercent\n\t\t})\n\t\tupdateReaders()\n\t}\n\n\tconst mouseMoveHandler = (ev: any, index: any) => {\n\t\tev.preventDefault()\n\t\tinitialPageX = ev.pageX\n\t\tpreMoveMouseWidths = readers.map(r => r.width)\n\t\t\n\t\tconst handler = (ev: any) => onMouseMove(ev, index)\n\t\tdocument.addEventListener('mousemove', handler)\n\t\tdocument.addEventListener('mouseup', _ev =>\n\t\t\tdocument.removeEventListener('mousemove', handler))\n\t}\n\n\tconst onAddReader = (index: number) => {\n\t\tindex++\n\t\tconst nextReader = readers[Math.min(index, readers.length - 1)]\n\t\tconst newReader = { text: 'en_ult', book: 'MAT' as BookNames, chapter: 1, width: nextReader.width / 2 }\n\t\tnextReader.width /= 2\n\t\treaders.splice(index, 0, newReader)\n\t\tupdateReaders()\n\t}\n\n\tconst onCloseReader = (index: number) => {\n\t\tconst lastWidth = readers[index].width\n\t\treaders.splice(index, 1)\n\t\treaders.forEach(reader => reader.width += lastWidth / readers.length)\n\t\tupdateReaders()\n\t}\n\n\tconst onReaderChange = (reader: ReaderState, text: string, book: BookNames, chapter: number) => {\n\t\treader.text = text\n\t\treader.book = book\n\t\treader.chapter = chapter\n\t\tupdateReaders()\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{readers.map((reader, index) => (\n\t\t\t\t<Fragment key={index}>\n\t\t\t\t\t<Reader\n\t\t\t\t\t\ttext={reader.text}\n\t\t\t\t\t\tbook={reader.book}\n\t\t\t\t\t\tchapter={reader.chapter}\n\t\t\t\t\t\tstyle={{ width: `${reader.width * 100}%` }}\n\t\t\t\t\t\tonAddReader={() => onAddReader(index)}\n\t\t\t\t\t\tonCloseReader={() => onCloseReader(index)}\n\t\t\t\t\t\tonNavChange={(text, book, chapter) => onReaderChange(reader, text, book, chapter)}\n\t\t\t\t\t/>\n\t\t\t\t\t{index !== readers.length - 1 &&\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass={styles.dragbar}\n\t\t\t\t\t\t\tonMouseDown={e => mouseMoveHandler(e, index)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</Fragment>\n\t\t\t))}\n\t\t</Fragment>\n\t)\n}\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n  \", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0V0z\"}, []), \"\\n  \", h('path', {\"d\":\"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM17 11h-4v4h-2v-4H7V9h4V5h2v4h4v2z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"none\",\"d\":\"M0 0h24v24H0z\"}, []), \"\\n\\t\", h('path', {\"d\":\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"d\":\"M9.62,12L12,5.67L14.37,12M11,3L5.5,17H7.75L8.87,14H15.12L16.25,17H18.5L13,3H11Z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n  \", h('path', {\"d\":\"M4,17L6.75,14.25L6.72,14.23C6.14,13.64 6.14,12.69 6.72,12.11L11.46,7.37L15.7,11.61L10.96,16.35C10.39,16.93 9.46,16.93 8.87,16.37L8.24,17H4M15.91,2.91C16.5,2.33 17.45,2.33 18.03,2.91L20.16,5.03C20.74,5.62 20.74,6.57 20.16,7.16L16.86,10.45L12.62,6.21L15.91,2.91Z\"}, []), \"\\n\"]);\n};\n\n        ","export { default as AddCommentIcon } from './md-add-comment.svg'\nexport { default as EditIcon } from './md-edit.svg'\nexport { default as FormatBoldIcon } from './md-format-bold.svg'\nexport { default as FormatItalicIcon } from './md-format-italic.svg'\nexport { default as FormatUnderlinedIcon } from './md-format-underlined.svg'\nexport { default as UndoIcon } from './md-undo.svg'\nexport { default as RedoIcon } from './md-redo.svg'\nexport { default as TextColorIcon } from './md-format-text-color.svg'\nexport { default as HighlightColorIcon } from './md-format-highlight.svg'\n","import { h } from 'preact'\nimport styles from './colorpalette.css'\n\ninterface ColorPaletteProps {\n\tonSelect: (color: string) => void;\n}\n\nexport function ColorPalette(props: ColorPaletteProps) {\n\tconst paletteRows = [\n\t\t[\n\t\t\t'rgb(0,0,0)',\n\t\t\t'rgb(67,67,67)',\n\t\t\t'rgb(102,102,102)',\n\t\t\t'rgb(153,153,153)',\n\t\t\t'rgb(183,183,183)',\n\t\t\t'rgb(204,204,204)',\n\t\t\t'rgb(217,217,217)',\n\t\t\t'rgb(239,239,239)',\n\t\t\t'rgb(243,243,243)',\n\t\t\t'rgb(255,255,255)',\n\t\t],\n\t\t[\n\t\t\t'rgb(152,0,0)',\n\t\t\t'rgb(255,0,0)',\n\t\t\t'rgb(255,153,0)',\n\t\t\t'rgb(255,255,0)',\n\t\t\t'rgb(0,255,0)',\n\t\t\t'rgb(0,255,255)',\n\t\t\t'rgb(74,134,232)',\n\t\t\t'rgb(0,0,255)',\n\t\t\t'rgb(153,0,255)',\n\t\t\t'rgb(255,0,255)',\n\t\t],\n\t]\n\n\treturn (\n\t\t<table class={styles.table}>\n\t\t\t<tbody>\n\t\t\t\t{paletteRows.map(row =>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{row.map(color =>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass={styles.swatch}\n\t\t\t\t\t\t\t\t\tstyle={{ background: color }}\n\t\t\t\t\t\t\t\t\tonClick={() => props.onSelect(color)}></div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</tr>\n\t\t\t\t)}\n\t\t\t</tbody>\n\t\t</table>\n\t)\n}","import { h } from 'preact'\nimport { useState } from 'preact/hooks'\nimport styles from './toolbar.css'\nimport { AddCommentIcon, UndoIcon, RedoIcon, FormatBoldIcon, FormatItalicIcon, FormatUnderlinedIcon, TextColorIcon, HighlightColorIcon } from '../../icons'\nimport { emit } from '../../utils/eventEmitter'\nimport { ColorPalette } from './colorpalette'\n\nexport function Toolbar() {\n\tconst [textColor, setTextColor] = useState('rgb(255,0,0)')\n\tconst [highlightColor, setHighlightColor] = useState('rgb(255,0,0)')\n\tconst [isTextColorPaletteOpen, setTextColorPaletteOpen] = useState(false)\n\tconst [isHighlightPaletteOpen, setHighlightPaletteOpen] = useState(false)\n\n\tconst onToggleTextPaletteOpen = () => {\n\t\tsetTextColorPaletteOpen(open => !open)\n\t\tsetHighlightPaletteOpen(false)\n\t}\n\n\tconst onToggleHighlightPaletteOpen = () => {\n\t\tsetHighlightPaletteOpen(open => !open)\n\t\tsetTextColorPaletteOpen(false)\n\t}\n\n\treturn (\n\t\t<div class={styles.toolbar} role=\"toolbar\">\n\t\t\t<button class={styles.button}>\n\t\t\t\t<UndoIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Undo</span>\n\t\t\t</button>\n\t\t\t<button class={styles.button}>\n\t\t\t\t<RedoIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Redo</span>\n\t\t\t</button>\n\t\t\t<button class={styles.button}>\n\t\t\t\t<FormatBoldIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Bold</span>\n\t\t\t</button>\n\t\t\t<button class={styles.button}>\n\t\t\t\t<FormatItalicIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Italic</span>\n\t\t\t</button>\n\t\t\t<button class={styles.button}>\n\t\t\t\t<FormatUnderlinedIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Underline</span>\n\t\t\t</button>\n\t\t\t<button class={styles.button} onClick={onToggleTextPaletteOpen}>\n\t\t\t\t<TextColorIcon style={{ fill: '#5f6368', borderBottom: `4px solid ${textColor}` }} />\n\t\t\t\t<span class={styles.tooltip}>Text color</span>\n\t\t\t\t{isTextColorPaletteOpen && \n\t\t\t\t\t<ColorPalette onSelect={(color: string) => {\n\t\t\t\t\t\tconsole.log('color', color)\n\t\t\t\t\t\tsetTextColor(color)\n\t\t\t\t\t}} />\n\t\t\t\t}\n\t\t\t</button>\n\t\t\t<button class={styles.button} onClick={onToggleHighlightPaletteOpen}>\n\t\t\t\t<HighlightColorIcon style={{ fill: '#5f6368', borderBottom: `4px solid ${highlightColor}` }} />\n\t\t\t\t<span class={styles.tooltip}>Highlight color</span>\n\t\t\t\t{isHighlightPaletteOpen && \n\t\t\t\t\t<ColorPalette onSelect={(color: string) => {\n\t\t\t\t\t\tsetHighlightColor(color)\n\t\t\t\t\t\temit('ADD_HIGHLIGHT', color)\n\t\t\t\t\t}} />\n\t\t\t\t}\n\t\t\t</button>\n\t\t\t<button class={styles.button} onClick={() => emit('ADD_NOTE')}>\n\t\t\t\t<AddCommentIcon style={{ fill: '#5f6368' }} />\n\t\t\t\t<span class={styles.tooltip}>Add comment</span>\n\t\t\t</button>\n\t\t\t{/* <Dropdown\n\t\t\t\tisRight\n\t\t\t\ticon=\"▼\"\n\t\t\t\tselected={<HighlighterIcon height=\"12px\" style=\"fill: #5f6368\" />}\n\t\t\t\tonSelect={(index: number) => {\n\t\t\t\t\tthis.setState({ selectedColor: highlighterColors[index] })\n\t\t\t\t\tthis.onHighlight(highlighterColors[index])\n\t\t\t\t}}\n\t\t\t\tonClick={() => this.onHighlight(selectedColor)}\n\t\t\t\tstyle={{ borderBottom: `4px solid ${this.state.selectedColor}` }}\n\t\t\t>\n\t\t\t\t{highlighterColors.map(color =>\n\t\t\t\t\t<HighlighterIcon value={color} height=\"12px\" style={`fill: ${color};`} />\n\t\t\t\t)}\n\t\t\t</Dropdown> */}\n\t\t</div>\n\t)\n}","export * from './nav/nav'\nexport * from './reader/reader'\nexport * from './readergroup/readergroup'\nexport * from './toolbar/toolbar'","import { h, Fragment } from 'preact'\nimport { Nav, ReaderGroup, Toolbar } from '../components'\n\nexport const Home = (_props: { path: String }) => {\n\treturn (\n\t\t<Fragment>\n\t\t\t<Nav />\n\t\t\t<Toolbar />\n\t\t\t<main>\n\t\t\t\t<ReaderGroup />\n\t\t\t</main>\n\t\t</Fragment>\n\t)\n}","import { h, Fragment } from 'preact'\nimport { Nav } from '../components'\n\nexport function About(_props: { path: String }) {\n\treturn (\n\t\t<Fragment>\n\t\t\t<Nav />\n\t\t\t<main>\n\t\t\t\t<div>\n\t\t\t\t\t<h2>About</h2>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThis is a site that (so far) renders\n\t\t\t\t\t\tthe <a href=\"https://git.door43.org/unfoldingWord/en_ult\">en_ult</a>\n\t\t\t\t\t\t&nbsp;and <a href=\"https://git.door43.org/unfoldingWord/en_ust\">en_ust</a> translations.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tIt does so by rendering the USFM markdown to JSON\n\t\t\t\t\t\tin <a href=\"https://github.com/thesmartwon/usfm2json\">usfm2json</a> to paragraphs,\n\t\t\t\t\t\tand then rendering those paragraphs to HTML following some rules for verse numbers,\n\t\t\t\t\t\tpunctuation, highlights, and notes. Currently your highlights and notes are saved\n\t\t\t\t\t\tto your browser's local storage.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tIt's written using&nbsp;\n\t\t\t\t\t\t<a href=\"https://preactjs.com/\">Preact</a>\n\t\t\t\t\t\t, <a href=\"https://babeljs.io/\">Babel</a>\n\t\t\t\t\t\t, and a lot of <a href=\"https://webpack.js.org/\">Webpack</a> sorcery.\n\t\t\t\t\t\tThe few icons come\n\t\t\t\t\t\tfrom <a href=\"https://fontawesome.com/\">FontAwesome</a>&nbsp;\n\t\t\t\t\t\tor <a href=\"https://material.io/resources/icons/\">Material Design.</a>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThe source code is available\n\t\t\t\t\t\ton <a href=\"https://github.com/thesmartwon/openbible\">Github</a> and it's\n\t\t\t\t\t\tdeployed\n\t\t\t\t\t\tusing <a href=\"https://pages.github.com/\">Github Pages.</a>&nbsp;\n\t\t\t\t\t\tI welcome contributions, there's still a lot of work to be done!\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t</Fragment>\n\t)\n}","import { h, Fragment } from 'preact'\nimport { useEffect, useState } from 'preact/hooks'\nimport { Nav, Reader } from '../components'\nimport { useLocalStorage, cssVars } from '../utils'\nimport styles from './settings.css'\nimport readerStyles from '../components/reader/reader.css'\n\nexport interface SettingsType {\n  selectVerseNums: string\n}\n\nexport const defaultSettings = {\n  selectVerseNums: 'noSelect'\n} as SettingsType\n\nexport function Settings(_props: { path: String }) {\n  const [cssValues, setCSSValues] = useState({} as { [key: string]: string });\n  const [config, setConfig] = useLocalStorage('settings', defaultSettings);\n\n  useEffect(() => {\n    const docStyles = getComputedStyle(document.body)\n    const docCSSVars = cssVars\n      .reduce((acc, cur) => {\n        acc[cur] = docStyles.getPropertyValue(cur).trim()\n        return acc\n      }, {} as { [key: string]: string })\n      setCSSValues(docCSSVars)\n  }, []);\n\n  const onSetCSSVar = (cssVar: string, cssValue: string) => {\n    document.body.style.setProperty(cssVar, cssValue)\n    cssValues[cssVar] = cssValue\n    setCSSValues({ ...cssValues })\n  }\n\n  const onSettingInput = (key: string, val: string) => {\n    config[key as keyof typeof defaultSettings] = val\n    setConfig({ ...config })\n  }\n\n  const onReset = (ev: h.JSX.TargetedEvent<HTMLFormElement, Event>) => {\n    ev.preventDefault()\n    cssVars.forEach(cssVar => {\n      const cssVal = getComputedStyle(document.documentElement)\n        .getPropertyValue(cssVar)\n        .trim()\n      onSetCSSVar(cssVar, cssVal)\n    })\n    setConfig({ ...defaultSettings })\n  }\n\n  const onSubmit = (ev: h.JSX.TargetedEvent<HTMLFormElement, Event>) => {\n    ev.preventDefault()\n    // TODO: web service\n    console.log('save settings')\n  }\n\n  return (\n    <Fragment>\n      <Nav />\n      <main>\n        <form class={styles.form} onSubmit={onSubmit} onReset={onReset}>\n          <h2>CSS Variables</h2>\n          {Object.entries(cssValues)\n            .map(entry => (\n              <p key={entry[0]}>\n                <label>{entry[0]}</label>\n                <input\n                  type={entry[0].includes('color') ? 'color' : ''}\n                  value={entry[1]}\n                  onInput={(ev: any) => onSetCSSVar(entry[0], ev.target.value)}\n                  />\n              </p>\n          ))}\n          <h2>Copy behavior</h2>\n          <p>\n            <label>Snap selection to words</label>\n            TODO: code no snapping but still snapping for highlighting\n          </p>\n          <p>\n            <label>Verse number selection</label>\n            <select\n              value={config.selectVerseNums}\n              onChange={(ev: any) => onSettingInput('selectVerseNums', ev.target.value)}\n            >\n              <option value=\"noSelect\">Don't select</option>\n              <option value=\"addSpace\">Add space</option>\n              <option value=\"default\">Browser default</option>\n            </select>\n          </p>\n          <input type=\"reset\" value=\"Reset settings\" />\n          <input type=\"submit\" value=\"Save settings\" />\n        </form>\n        <div class={`${readerStyles.reader} ${styles.testDiv}`}>\n          <Reader text=\"en_ult\" book=\"PSA\" chapter={119} />\n        </div>\n      </main>\n    </Fragment>\n  )\n}\n","export * from './home'\nexport * from './about'\nexport * from './settings'","import { h, render } from 'preact'\nimport { useEffect } from 'preact/hooks'\nimport Router from 'preact-router'\nimport { Home, About, Settings } from './pages'\nimport { loadLocalCSSVars } from './utils/cssVars'\nimport './app.css'\n\nfunction App() {\n\tuseEffect(loadLocalCSSVars, [])\n\n\treturn (\n\t\t<Router>\n\t\t\t<Home path=\"/\" />\n\t\t\t<About path=\"/about\" />\n\t\t\t<Settings path=\"/settings\" />\n\t\t</Router>\n\t)\n}\n\nrender(\n\t<App />,\n\tdocument.getElementById('root') as HTMLElement\n)\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dragbar\":\"css-1qs_t\"};"],"sourceRoot":""}